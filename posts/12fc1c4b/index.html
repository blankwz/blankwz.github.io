<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JSP 教程 | Gxkon's Blog</title><meta name="description" content="JSP 教程 JSP 与 PHP、ASP、ASP.NET 等语言类似，运行在服务端的语言 JSP（全称Java Server Pages）使软件开发者可以响应客户端请求，而动态生成 HTML、XML 或其他格式文档的Web网页的技术标准 JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于HTTP的应用程序 文件后缀名为 *.jsp"><meta name="keywords" content="JSP"><meta name="author" content="Gkon"><meta name="copyright" content="Gkon"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="JSP 教程"><meta name="twitter:description" content="JSP 教程 JSP 与 PHP、ASP、ASP.NET 等语言类似，运行在服务端的语言 JSP（全称Java Server Pages）使软件开发者可以响应客户端请求，而动态生成 HTML、XML 或其他格式文档的Web网页的技术标准 JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于HTTP的应用程序 文件后缀名为 *.jsp"><meta name="twitter:image" content="https://pic-1256641195.cos.ap-nanjing.myqcloud.com/2020/07/night-5395836_1280.jpg"><meta property="og:type" content="article"><meta property="og:title" content="JSP 教程"><meta property="og:url" content="http://gxkon.top/posts/12fc1c4b/"><meta property="og:site_name" content="Gxkon's Blog"><meta property="og:description" content="JSP 教程 JSP 与 PHP、ASP、ASP.NET 等语言类似，运行在服务端的语言 JSP（全称Java Server Pages）使软件开发者可以响应客户端请求，而动态生成 HTML、XML 或其他格式文档的Web网页的技术标准 JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于HTTP的应用程序 文件后缀名为 *.jsp"><meta property="og:image" content="https://pic-1256641195.cos.ap-nanjing.myqcloud.com/2020/07/night-5395836_1280.jpg"><meta property="article:published_time" content="2020-07-13T15:23:55.000Z"><meta property="article:modified_time" content="2020-07-18T13:06:28.225Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://gxkon.top/posts/12fc1c4b/"><link rel="prev" title="ADO 教程" href="http://gxkon.top/posts/8726eb83/"><link rel="next" title="REG和BAT文件操作注册表方法" href="http://gxkon.top/posts/decfd2ee/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"本人,超帅,打钱","fontSize":"15px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/Pic/avatar.png" onerror="onerror=null;src='/Pic/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">95</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">65</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">44</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JSP-教程"><span class="toc-text">JSP 教程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、简介"><span class="toc-text">一、简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP程序与CGI程序区别"><span class="toc-text">JSP程序与CGI程序区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他优势"><span class="toc-text">其他优势</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、开发环境搭建"><span class="toc-text">二、开发环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Web服务器：Tomcat"><span class="toc-text">Web服务器：Tomcat</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#设置-CLASSPATH-环境变量"><span class="toc-text">设置 CLASSPATH 环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#开启"><span class="toc-text">开启</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#停止"><span class="toc-text">停止</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、JSP结构"><span class="toc-text">三、JSP结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Web-服务器是如何使用JSP来创建网页的"><span class="toc-text">Web 服务器是如何使用JSP来创建网页的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更高效快捷"><span class="toc-text">更高效快捷</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、JSP-生命周期"><span class="toc-text">四、JSP 生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP生命周期的几个阶段"><span class="toc-text">JSP生命周期的几个阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-JSP编译"><span class="toc-text">1. JSP编译</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#编译的过程包括三个步骤："><span class="toc-text">编译的过程包括三个步骤：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JSP初始化-jspInit-方"><span class="toc-text">2. JSP初始化 - jspInit()方</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-JSP执行-jspService"><span class="toc-text">3. JSP执行 - _jspService()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-JSP清理-jspDestroy"><span class="toc-text">4.JSP清理 - jspDestroy()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、JSP语法"><span class="toc-text">五、JSP语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-脚本程序-lt-gt"><span class="toc-text">1.脚本程序 &lt;%  %&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-中文编码问题"><span class="toc-text">2.中文编码问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-JSP声明-lt-gt"><span class="toc-text">3.JSP声明 &lt;%! %&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-JSP表达式-lt-gt"><span class="toc-text">4.JSP表达式 &lt;%&#x3D;  %&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-JSP注释"><span class="toc-text">5.JSP注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-JSP指令-lt-gt"><span class="toc-text">6.JSP指令 &lt;%@  %&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-JSP行为-动作元素"><span class="toc-text">7.JSP行为 动作元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-JSP隐含对象"><span class="toc-text">8.JSP隐含对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-控制流语句"><span class="toc-text">9.控制流语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#判断语句-IF"><span class="toc-text">判断语句 IF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断语句-switch…case"><span class="toc-text">判断语句 switch…case</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-循环语句"><span class="toc-text">10.循环语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#for循环"><span class="toc-text">for循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#while-循环"><span class="toc-text">while 循环</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-JSP运算符"><span class="toc-text">11.JSP运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-JSP-字面量"><span class="toc-text">12.JSP 字面量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、JSP指令-lt-gt"><span class="toc-text">六、JSP指令  &lt;%@  %&gt;</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Page指令"><span class="toc-text">Page指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#与Page指令相关的属性："><span class="toc-text">与Page指令相关的属性：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Include指令"><span class="toc-text">Include指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Taglib指令"><span class="toc-text">Taglib指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、JSP-动作元素"><span class="toc-text">七、JSP 动作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常见的属性"><span class="toc-text">常见的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-include-gt-动作元素"><span class="toc-text">&lt;jsp:include&gt;动作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#示例"><span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-useBean-gt-动作元素"><span class="toc-text">&lt;jsp:useBean&gt;动作元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-setProperty-gt-动作元素"><span class="toc-text">&lt;jsp:setProperty&gt;动作元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-getProperty-gt-动作元素"><span class="toc-text">&lt;jsp:getProperty&gt;动作元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-forward-gt-动作元素"><span class="toc-text">&lt;jsp:forward&gt; 动作元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-plugin-gt-动作元素"><span class="toc-text">&lt;jsp:plugin&gt;动作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#示例-1"><span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-element-gt-lt-jsp-attribute-gt-lt-jsp-body-gt"><span class="toc-text">&lt;jsp:element&gt;,&lt;jsp:attribute&gt;,&lt;jsp:body&gt;</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#示例-2"><span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-jsp-text-gt-动作元素"><span class="toc-text">&lt;jsp:text&gt;动作元素</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八、隐式对象"><span class="toc-text">八、隐式对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#request对象"><span class="toc-text">request对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#response对象"><span class="toc-text">response对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#out对象"><span class="toc-text">out对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#输出方法"><span class="toc-text">输出方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session对象"><span class="toc-text">session对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#application对象"><span class="toc-text">application对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#config对象"><span class="toc-text">config对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pageContext-对象"><span class="toc-text">pageContext 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#page-对象"><span class="toc-text">page 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exception-对象"><span class="toc-text">exception 对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九、客户端请求与服务器响应"><span class="toc-text">九、客户端请求与服务器响应</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#客户端请求"><span class="toc-text">客户端请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServletRequest类"><span class="toc-text">HttpServletRequest类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#读取HTTP信息头"><span class="toc-text">读取HTTP信息头</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务器响应"><span class="toc-text">服务器响应</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServletResponse类"><span class="toc-text">HttpServletResponse类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP响应头程序示例"><span class="toc-text">HTTP响应头程序示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十、HTTP-状态码"><span class="toc-text">十、HTTP 状态码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#各种状态码"><span class="toc-text">各种状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置HTTP状态码的方法"><span class="toc-text">设置HTTP状态码的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP状态码程序示例"><span class="toc-text">HTTP状态码程序示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十一、表单处理（POST与GET）"><span class="toc-text">十一、表单处理（POST与GET）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GET-方法"><span class="toc-text">GET 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#GET-方法实例-使用URL"><span class="toc-text">GET 方法实例(使用URL)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GET-方法实例-使用表单"><span class="toc-text">GET 方法实例(使用表单)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POST-方法"><span class="toc-text">POST 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#POST-方法实例-使用表单"><span class="toc-text">POST 方法实例(使用表单)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-读取表单数据"><span class="toc-text">JSP 读取表单数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#示例：传递-Checkbox-数据到JSP程序"><span class="toc-text">示例：传递 Checkbox 数据到JSP程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#示例：读取所有表单参数"><span class="toc-text">示例：读取所有表单参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十二、Filter-过滤器"><span class="toc-text">十二、Filter 过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#根据规范建议的各种类型的过滤器："><span class="toc-text">根据规范建议的各种类型的过滤器：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤器的过程"><span class="toc-text">过滤器的过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet-过滤器方法"><span class="toc-text">Servlet 过滤器方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十三、Cookie-处理"><span class="toc-text">十三、Cookie 处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSP-Cookie-处理需要对中文进行编码与解码"><span class="toc-text">JSP Cookie 处理需要对中文进行编码与解码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie-剖析"><span class="toc-text">Cookie 剖析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Servlet-Cookie-方法"><span class="toc-text">Servlet Cookie 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-JSP-设置-cookie的三个步骤"><span class="toc-text">使用 JSP 设置 cookie的三个步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#读取-Cookie"><span class="toc-text">读取 Cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除-cookie"><span class="toc-text">删除 cookie</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十四、-Session-会话"><span class="toc-text">十四、 Session 会话</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookies（不推荐）"><span class="toc-text">Cookies（不推荐）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#隐藏表单域（不推荐）"><span class="toc-text">隐藏表单域（不推荐）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#重写URL-好，但麻烦"><span class="toc-text">重写URL(好，但麻烦)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#session对象-1"><span class="toc-text">session对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Session应用-示例"><span class="toc-text">Session应用(示例)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除Session数据"><span class="toc-text">删除Session数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十五、文件上传（示例）"><span class="toc-text">十五、文件上传（示例）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用到的文件有："><span class="toc-text">使用到的文件有：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建一个文件上传表单"><span class="toc-text">创建一个文件上传表单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写后台-Servlet"><span class="toc-text">编写后台 Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#上传成功后跳转页面"><span class="toc-text">上传成功后跳转页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编译和运行-Servlet"><span class="toc-text">编译和运行 Servlet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十六、日期处理-（JAVA）"><span class="toc-text">十六、日期处理 （JAVA）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#方法"><span class="toc-text">方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取当前日期和时间"><span class="toc-text">获取当前日期和时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#日期比较"><span class="toc-text">日期比较</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#格式化日期"><span class="toc-text">格式化日期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SimpleDateFormat格式码"><span class="toc-text">SimpleDateFormat格式码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十七、页面重定向"><span class="toc-text">十七、页面重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#示例-3"><span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十八、自动刷新"><span class="toc-text">十八、自动刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#示例-4"><span class="toc-text">示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十九、JSP-标准标签库（JSTL）"><span class="toc-text">十九、JSP 标准标签库（JSTL）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二十、连接数据库"><span class="toc-text">二十、连接数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二十一、XML-数据处理"><span class="toc-text">二十一、XML 数据处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#使用JSP发送XML"><span class="toc-text">使用JSP发送XML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#处理XML与格式化XML"><span class="toc-text">处理XML与格式化XML</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二十二、JSP-JavaBean"><span class="toc-text">二十二、JSP JavaBean</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二十三、JSP-自定义标签"><span class="toc-text">二十三、JSP 自定义标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建”Hello”标签"><span class="toc-text">创建”Hello”标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#访问标签体"><span class="toc-text">访问标签体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义标签属性"><span class="toc-text">自定义标签属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二十四、JSP-表达式语言-expr"><span class="toc-text">二十四、JSP 表达式语言 ${expr}</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法"><span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EL中的基础操作符"><span class="toc-text">EL中的基础操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EL中的函数"><span class="toc-text">EL中的函数</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://pic-1256641195.cos.ap-nanjing.myqcloud.com/2020/07/night-5395836_1280.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Gxkon's Blog</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">JSP 教程</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-07-13 23:23:55"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-07-13</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-07-18 21:06:28"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-07-18</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Web%E6%95%99%E7%A8%8B%E7%B3%BB%E5%88%97/">Web教程系列</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/posts/12fc1c4b/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="JSP-教程"><a href="#JSP-教程" class="headerlink" title="JSP 教程"></a>JSP 教程</h1><blockquote>
<p>JSP 与 PHP、ASP、ASP.NET 等语言类似，运行在服务端的语言</p>
<p>JSP（全称Java Server Pages）使软件开发者可以响应客户端请求，而动态生成 HTML、XML 或其他格式文档的Web网页的技术标准</p>
<p>JSP 技术是以 Java 语言作为脚本语言的，JSP 网页为整个服务器端的 Java 库单元提供了一个接口来服务于HTTP的应用程序</p>
<p>文件后缀名为 <strong>*.jsp</strong> </p>
<p>JSP开发的WEB应用可以跨平台使用，既可以运行在 Linux 上也能运行在 Windows 上</p>
</blockquote>
<h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>JSP全称Java Server Pages，是一种动态网页开发技术。</p>
<ul>
<li>它使用JSP标签在HTML网页中插入Java代码。</li>
<li>标签通常<code>以&lt;%开头，以%&gt;结束</code></li>
<li>JSP是一种<strong>Java servlet</strong>，主要用于实现Java web应用程序的用户界面部分</li>
<li>网页开发者们通过结合HTML代码、XHTML代码、XML元素以及嵌入JSP操作和命令来编写JSP。</li>
<li>JSP通过网页表单获取用户输入数据、访问数据库及其他数据源，然后动态地创建网页</li>
</ul>
<h3 id="JSP程序与CGI程序区别"><a href="#JSP程序与CGI程序区别" class="headerlink" title="JSP程序与CGI程序区别"></a>JSP程序与CGI程序区别</h3><p>和CGI程序相比，JSP程序有如下优势：</p>
<ul>
<li><code>性能更加优越</code>，因为JSP可以直接在HTML网页中动态嵌入元素而不需要单独引用CGI文件。</li>
<li>服务器<code>调用的是已经编译好的JSP文件</code>，而不像CGI/Perl那样必须先载入解释器和目标脚本。</li>
<li>JSP 基于Java Servlet API，因此，JSP<code>拥有各种强大的企业级Java API</code>，包括JDBC，JNDI，EJB，JAXP等等。</li>
<li>JSP页面<code>可以与处理业务逻辑的 Servlet 一起使用</code>，这种模式被Java servlet 模板引擎所支持。</li>
</ul>
<p>最后，<code>JSP是Java EE不可或缺的一部分</code>，是一个完整的企业级应用平台。这意味着JSP可以用最简单的方式来实现最复杂的应用。</p>
<h3 id="其他优势"><a href="#其他优势" class="headerlink" title="其他优势"></a>其他优势</h3><p>使用JSP带来的其他好处：</p>
<ul>
<li>与ASP相比：JSP有两大优势。首先，动态部分用Java编写，而不是VB或其他MS专用语言，所以更加强大与易用。第二点就是JSP易于移植到非MS平台上。</li>
<li>与纯 Servlet 相比：JSP可以很方便的编写或者修改HTML网页而不用去面对大量的println语句。</li>
<li>与SSI相比：SSI无法使用表单数据、无法进行数据库链接。</li>
<li>与JavaScript相比：虽然JavaScript可以在客户端动态生成HTML，但是很难与服务器交互，因此不能提供复杂的服务，比如访问数据库和图像处理等等。</li>
<li>与静态HTML相比：静态HTML不包含动态信息。</li>
</ul>
<h2 id="二、开发环境搭建"><a href="#二、开发环境搭建" class="headerlink" title="二、开发环境搭建"></a>二、开发环境搭建</h2><p>环境需求</p>
<ol>
<li><p><code>JAVA的JDK</code>：参照 <a href="https://www.runoob.com/java/java-environment-setup.html" target="_blank" rel="noopener">Java 开发环境配置</a></p>
</li>
<li><p><code>支持JSP 和 Servlets 开发的 Web 服务器</code>，比如：</p>
<ul>
<li><strong>Tomcat</strong> </li>
</ul>
</li>
<li><p>可选 （某种编辑器）</p>
<ul>
<li>Borland JBuilder</li>
<li><strong>Eclipse</strong>：参照<a href="https://www.runoob.com/jsp/eclipse-jsp.html" target="_blank" rel="noopener">Eclipse JSP/Servlet 环境搭建</a></li>
<li>IntelliJ IDEA </li>
<li>Sun ONE Studio</li>
</ul>
</li>
</ol>
<h3 id="Web服务器：Tomcat"><a href="#Web服务器：Tomcat" class="headerlink" title="Web服务器：Tomcat"></a>Web服务器：Tomcat</h3><p>目前，市场上有很多支持 JSP 和 Servlets 开发的 Web 服务器。他们中的一些可以免费下载和使用，Tomcat 就是其中之一。</p>
<p>Apache Tomcat 是一个开源软件，可作为独立的服务器来运行 JSP 和 Servlets，也可以集成在 Apache Web Server 中。</p>
<ol>
<li>下载安装<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">Tomcat</a></li>
<li>安装目录 设置成环境变量  <pre><code>- 创建 CATALINA_HOME 环境变量指向目录</code></pre><ol start="3">
<li>设置 CLASSPATH 环境变量 （指定Tomcat为它的servlet类的编辑器）</li>
</ol>
</li>
</ol>
<h4 id="设置-CLASSPATH-环境变量"><a href="#设置-CLASSPATH-环境变量" class="headerlink" title="设置 CLASSPATH 环境变量"></a>设置 CLASSPATH 环境变量</h4><p>由于 servlets 不是 Java SE 的一部分，所以您必须标示出 servlet 类的编译器。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//创建**.bat文件，然后执行它</span><br><span class="line">//设置了CATALINA_HOME 和 CLASSPATH环境变量</span><br><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> 添加 bat 环境变量</span><br><span class="line"><span class="built_in">set</span> regpath=HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> evname=CATALINA_HOME</span><br><span class="line"><span class="built_in">set</span> batpath=D:\apache-tomcat-10.0.0-M7</span><br><span class="line">reg add <span class="string">"%regpath%"</span> /v %evname% /d %batpath% /f</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> evname=CLASSPATH</span><br><span class="line"><span class="built_in">set</span> batpath2=%batpath%\common\lib\jsp-api.jar;</span><br><span class="line">reg add <span class="string">"%regpath%"</span> /v %evname% /d %batpath2% /f</span><br><span class="line">pause&gt;nul</span><br></pre></td></tr></table></figure>



<h4 id="开启"><a href="#开启" class="headerlink" title="开启"></a>开启</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%CATALINA_HOME%\bin\startup.bat</span><br><span class="line">或者</span><br><span class="line">C:\apache-tomcat-5.5.29\bin\startup.bat</span><br></pre></td></tr></table></figure>

<p>访问：<a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></p>
<h4 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%CATALINA_HOME%\bin\shutdown.bat</span><br><span class="line">或者</span><br><span class="line">C:\apache-tomcat-5.5.29\bin\shutdown.bat</span><br></pre></td></tr></table></figure>

<h2 id="三、JSP结构"><a href="#三、JSP结构" class="headerlink" title="三、JSP结构"></a>三、JSP结构</h2><p>网络服务器需要一个 JSP 引擎，</p>
<ul>
<li>也就是一个容器来处理 JSP 页面。</li>
<li>容器负责截获对 JSP 页面的请求。</li>
</ul>
<p>JSP 容器与 Web 服务器协同合作，为JSP的正常运行提供必要的运行环境和其他服务，并且能够正确识别专属于 JSP 网页的特殊元素</p>
<h3 id="Web-服务器是如何使用JSP来创建网页的"><a href="#Web-服务器是如何使用JSP来创建网页的" class="headerlink" title="Web 服务器是如何使用JSP来创建网页的"></a>Web 服务器是如何使用JSP来创建网页的</h3><ol>
<li>浏览器发送一个 HTTP 请求给服务器</li>
<li>Web 服务器<strong>识别</strong>出这是一个对 <strong>JSP</strong> 网页的请求，并且将该请求<strong>传递给 JSP 引擎</strong>。通过使用 URL或者 .jsp 文件来完成</li>
<li>JSP 引擎从磁盘中<strong>载入 JSP 文件</strong>，然后将它们<strong>转化为 Servlet</strong><ul>
<li>这种转化只是简单地将所有模板文本改用 println() 语句，并且将所有的 JSP 元素转化成 Java 代码。</li>
</ul>
</li>
<li>JSP 引擎将 Servlet <strong>编译成可执行类</strong>，并且将原始请求<strong>传递给 Servlet 引擎</strong></li>
<li>Web 服务器的某组件将会<strong>调用 Servlet 引擎</strong>，然后<strong>载入并执行 Servlet 类</strong><ul>
<li>在执行过程中，Servlet 产生 HTML 格式的输出并将其内嵌于 HTTP response 中上交给 Web 服务器。</li>
</ul>
</li>
<li>Web 服务器以<strong>静态 HTML 网页</strong>的形式将 HTTP response <strong>返回到您的浏览器中</strong></li>
<li>最终，Web 浏览器<strong>处理</strong> HTTP response 中动态<strong>产生的HTML网页</strong>，就好像在处理静态网页一样</li>
</ol>
<h3 id="更高效快捷"><a href="#更高效快捷" class="headerlink" title="更高效快捷"></a>更高效快捷</h3><p>一般情况下，JSP 引擎会检查 <strong>JSP 文件对应的 Servlet</strong> 是否已经存在，并且检查 JSP 文件的<strong>修改日期是否早于 Servlet</strong>。如果 JSP 文件的修改日期早于对应的 Servlet，那么容器就可以确定 JSP 文件没有被修改过并且 Servlet 有效。这使得整个流程与其他脚本语言（比如 PHP）相比要高效快捷一些。</p>
<blockquote>
<p>总的来说，JSP 网页就是用另一种方式来编写 Servlet 。（无需搞懂JAVA）</p>
<p>除了解释阶段外，JSP 网页几乎可以被当成一个普通的 Servlet 来对待。</p>
</blockquote>
<h2 id="四、JSP-生命周期"><a href="#四、JSP-生命周期" class="headerlink" title="四、JSP 生命周期"></a>四、JSP 生命周期</h2><p>理解JSP底层功能的关键就是去理解它们所遵守的生命周期。</p>
<p><strong>JSP生命周期就是从创建到销毁的整个过程</strong></p>
<ul>
<li>类似于servlet生命周期，区别在于JSP生命周期还包括将JSP文件编译成servlet</li>
</ul>
<h3 id="JSP生命周期的几个阶段"><a href="#JSP生命周期的几个阶段" class="headerlink" title="JSP生命周期的几个阶段"></a>JSP生命周期的几个阶段</h3><ul>
<li><p><strong>编译阶段：</strong></p>
<p>servlet容器编译servlet源文件，生成servlet类</p>
</li>
<li><p><strong>初始化阶段</strong>：</p>
<p>加载与JSP对应的servlet类，创建其实例，并调用它的初始化方法</p>
</li>
<li><p><strong>执行阶段</strong>：</p>
<p>调用与JSP对应的servlet实例的服务方法</p>
</li>
<li><p><strong>销毁阶段</strong>：</p>
<p>调用与JSP对应的servlet实例的销毁方法，然后销毁servlet实例</p>
</li>
</ul>
<h3 id="1-JSP编译"><a href="#1-JSP编译" class="headerlink" title="1. JSP编译"></a>1. JSP编译</h3><p><strong>当浏览器请求JSP页面时，JSP引擎会首先去检查是否需要编译这个文件</strong>。</p>
<ul>
<li>如果这个文件没有被编译过，或者在上次编译后被更改过，则编译这个JSP文件。（更高效快速！）</li>
</ul>
<h4 id="编译的过程包括三个步骤："><a href="#编译的过程包括三个步骤：" class="headerlink" title="编译的过程包括三个步骤："></a>编译的过程包括三个步骤：</h4><ul>
<li>解析JSP文件。</li>
<li>将JSP文件转为servlet。</li>
<li>编译servlet。</li>
</ul>
<h3 id="2-JSP初始化-jspInit-方"><a href="#2-JSP初始化-jspInit-方" class="headerlink" title="2. JSP初始化 - jspInit()方"></a>2. JSP初始化 - jspInit()方</h3><p><strong>容器载入JSP文件后，它会在为请求提供任何服务前调用jspInit()方法</strong>。</p>
<ul>
<li><p>一般来讲程序只初始化一次，servlet也是如此。</p>
</li>
<li><p>通常情况下您可以在jspInit()方法中初始化数据库连接、打开文件和创建查询表</p>
</li>
<li><p>如果您需要执行<strong>自定义的JSP初始化任务，复写jspInit()方法</strong>就行了，</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspInit</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">// 初始化代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="3-JSP执行-jspService"><a href="#3-JSP执行-jspService" class="headerlink" title="3. JSP执行 - _jspService()"></a>3. JSP执行 - _jspService()</h3><p>这一阶段描述了JSP生命周期中<strong>一切与请求相关的交互行为</strong>，直到被销毁。</p>
<p><strong>当JSP网页完成初始化后</strong>，JSP引擎将会调用<code>_jspService()</code>方法</p>
<ul>
<li><p><strong>_jspService()方法</strong>需要一个<code>HttpServletRequest对象</code>和一个<code>HttpServletResponse对象</code>作为它的<code>参数</code></p>
</li>
<li><p><strong>_jspService()方法</strong>在每个request中被调用一次并且负责产生与之相对应的response，并且它还负责产生所有7个HTTP方法的回应，比如GET、POST、DELETE等等。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">_jspService</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                 HttpServletResponse response)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">// 服务端处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="4-JSP清理-jspDestroy"><a href="#4-JSP清理-jspDestroy" class="headerlink" title="4.JSP清理 - jspDestroy()"></a>4.JSP清理 - <strong>jspDestroy()</strong></h3><p>JSP生命周期的销毁阶段描述了<strong>当一个JSP网页从容器中被移除时所发生的一切</strong>。</p>
<p><strong>jspDestroy()</strong>方法在JSP中<code>等价于servlet中的销毁方法</code>。</p>
<ul>
<li><p><strong>当需要执行任何清理工作时复写jspDestroy()方法</strong>，比如释放数据库连接或者关闭文件夹等等。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jspDestroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="comment">// 清理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="五、JSP语法"><a href="#五、JSP语法" class="headerlink" title="五、JSP语法"></a>五、JSP语法</h2><h3 id="1-脚本程序-lt-gt"><a href="#1-脚本程序-lt-gt" class="headerlink" title="1.脚本程序 &lt;%  %&gt;"></a>1.脚本程序 <code>&lt;%  %&gt;</code></h3><p><strong>包含任意量的Java语句、变量、方法或表达式</strong>，只要它们在脚本语言中是有效的</p>
<ul>
<li><p>格式：<code>&lt;% 代码片段 %&gt;</code></p>
</li>
<li><p>与其等价的XML语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jsp:scriptlet</span>&gt;</span></span><br><span class="line">   代码片段</span><br><span class="line"><span class="tag">&lt;/<span class="name">jsp:scriptlet</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<blockquote>
<p>任何文本、HTML标签、JSP元素必须写在脚本程序的外面！！</p>
</blockquote>
<h3 id="2-中文编码问题"><a href="#2-中文编码问题" class="headerlink" title="2.中文编码问题"></a>2.中文编码问题</h3><p>如果要在页面正常显示中文，我们需要在 JSP 文件头部添加以下代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-JSP声明-lt-gt"><a href="#3-JSP声明-lt-gt" class="headerlink" title="3.JSP声明 &lt;%! %&gt;"></a>3.JSP声明 <code>&lt;%! %&gt;</code></h3><p>一个声明语句可以声明一个或多个变量、方法，供后面的Java代码使用。</p>
<p>在JSP文件中，您<strong>必须先声明这些变量和方法</strong>然后才能使用它们</p>
<ul>
<li><p>格式：<code>&lt;%! declaration; [ declaration; ]+ ... %&gt;</code></p>
</li>
<li><p>与其等价的XML语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:declaration&gt;</span><br><span class="line">   代码片段</span><br><span class="line">&lt;&#x2F;jsp:declaration&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> i = <span class="number">0</span>; %&gt; </span><br><span class="line">&lt;%! <span class="keyword">int</span> a, b, c; %&gt; </span><br><span class="line">&lt;%! Circle a = <span class="keyword">new</span> Circle(<span class="number">2.0</span>); %&gt;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="4-JSP表达式-lt-gt"><a href="#4-JSP表达式-lt-gt" class="headerlink" title="4.JSP表达式 &lt;%=  %&gt;"></a>4.JSP表达式 <code>&lt;%=  %&gt;</code></h3><p>一个JSP表达式中包含的脚本语言表达式，</p>
<ul>
<li>先被转化成String，</li>
<li>然后插入到表达式出现的地方</li>
</ul>
<p>由于表达式的值会被转化成String，所以<strong>可以在一个文本行中使用表达式而不用去管它是否是HTML标签</strong></p>
<p>表达式元素中<strong>可以包含任何符合Java语言规范的表达式</strong>，但是不能使用分号来结束表达式</p>
<ul>
<li><p>格式：<code>&lt;%= 表达式 %&gt;</code></p>
</li>
<li><p>与其等价的XML语句</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:expression&gt;</span><br><span class="line">   表达式</span><br><span class="line">&lt;/jsp:expression&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例：<code>今天的日期是: &lt;%= (new java.util.Date()).toLocaleString()%&gt;</code></p>
</li>
</ul>
<h3 id="5-JSP注释"><a href="#5-JSP注释" class="headerlink" title="5.JSP注释"></a>5.JSP注释</h3><p>主要有两个作用：为代码作注释以及将某段代码注释掉</p>
<p>不同情况下使用注释的语法规则：</p>
<table>
<thead>
<tr>
<th align="left"><strong>语法</strong></th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>&lt;%-- 注释 --%&gt;</code></td>
<td align="left">JSP注释，注释内容不会被发送至浏览器甚至不会被编译</td>
</tr>
<tr>
<td align="left"><code>&lt;!-- 注释 --&gt;</code></td>
<td align="left">HTML注释，通过浏览器查看网页源代码时可以看见注释内容</td>
</tr>
<tr>
<td align="left"><code>&lt;\%</code></td>
<td align="left">代表静态 &lt;%常量</td>
</tr>
<tr>
<td align="left"><code>%\&gt;</code></td>
<td align="left">代表静态 %&gt; 常量</td>
</tr>
<tr>
<td align="left"><code>\&#39;</code></td>
<td align="left">在属性中使用的单引号</td>
</tr>
<tr>
<td align="left"><code>\&quot;</code></td>
<td align="left">在属性中使用的双引号</td>
</tr>
</tbody></table>
<h3 id="6-JSP指令-lt-gt"><a href="#6-JSP指令-lt-gt" class="headerlink" title="6.JSP指令 &lt;%@  %&gt;"></a>6.JSP指令 <code>&lt;%@  %&gt;</code></h3><p><strong>用来设置与整个JSP页面相关的属性</strong></p>
<ul>
<li>语法：<code>&lt;%@ directive attribute=&quot;value&quot; %&gt;</code></li>
</ul>
<p>这里有三种指令标签：</p>
<table>
<thead>
<tr>
<th align="left"><strong>指令</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt;%@ page … %&gt;</td>
<td align="left">定义页面的依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td align="left">&lt;%@ include … %&gt;</td>
<td align="left">包含其他文件</td>
</tr>
<tr>
<td align="left">&lt;%@ taglib … %&gt;</td>
<td align="left">引入标签库的定义，可以是自定义标签</td>
</tr>
</tbody></table>
<h3 id="7-JSP行为-动作元素"><a href="#7-JSP行为-动作元素" class="headerlink" title="7.JSP行为 动作元素"></a>7.JSP行为 动作元素</h3><p>JSP行为标签使用XML语法结构来控制servlet引擎。</p>
<ul>
<li><p>它能够动态插入一个文件，重用JavaBean组件，引导用户去另一个页面，为Java插件产生相关的HTML等等。</p>
</li>
<li><p>行为标签只有一种语法格式，它严格遵守XML标准</p>
<ul>
<li><code>&lt;jsp:action_name attribute=&quot;value&quot; /&gt;</code></li>
</ul>
</li>
<li><p>行为标签基本上是一些预先就定义好的函数</p>
</li>
</ul>
<p>详情见：下面[七、JSP 动作元素](#七、JSP 动作元素)</p>
<h3 id="8-JSP隐含对象"><a href="#8-JSP隐含对象" class="headerlink" title="8.JSP隐含对象"></a>8.JSP隐含对象</h3><p>JSP支持<code>九个自动定义的变量</code>，江湖人称<code>隐含对象</code>。</p>
<p>这九个隐含对象的简介见下表：</p>
<table>
<thead>
<tr>
<th align="left"><strong>对象</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">request</td>
<td align="left"><strong>HttpServletRequest</strong>类的实例</td>
</tr>
<tr>
<td align="left">response</td>
<td align="left"><strong>HttpServletResponse</strong>类的实例</td>
</tr>
<tr>
<td align="left">out</td>
<td align="left"><strong>PrintWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td align="left">session</td>
<td align="left"><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td align="left">application</td>
<td align="left"><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td align="left">config</td>
<td align="left"><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td align="left">pageContext</td>
<td align="left"><strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td align="left">page</td>
<td align="left">类似于Java类中的this关键字</td>
</tr>
<tr>
<td align="left">Exception</td>
<td align="left"><strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</td>
</tr>
</tbody></table>
<p>详见：<a href="#八、隐式对象">八、隐式对象</a></p>
<h3 id="9-控制流语句"><a href="#9-控制流语句" class="headerlink" title="9.控制流语句"></a>9.控制流语句</h3><p><strong>JSP提供对Java语言的全面支持</strong>。</p>
<p>可以在JSP程序中<strong>使用Java API甚至建立Java代码块</strong>，包括判断语句和循环语句等等</p>
<h4 id="判断语句-IF"><a href="#判断语句-IF" class="headerlink" title="判断语句 IF"></a>判断语句 IF</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (day == <span class="number">1</span> | day == <span class="number">7</span>) &#123; %&gt;</span><br><span class="line">      &lt;p&gt;今天是周末&lt;/p&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123; %&gt;</span><br><span class="line">      &lt;p&gt;今天不是周末&lt;/p&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure>

<h4 id="判断语句-switch…case"><a href="#判断语句-switch…case" class="headerlink" title="判断语句 switch…case"></a>判断语句 switch…case</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> day = <span class="number">3</span>; %&gt; </span><br><span class="line"></span><br><span class="line">&lt;h3&gt;SWITCH...CASE 实例&lt;/h3&gt;</span><br><span class="line">&lt;% </span><br><span class="line"><span class="keyword">switch</span>(day) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">   out.println(<span class="string">"星期天"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">   out.println(<span class="string">"星期一"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">   out.println(<span class="string">"星期二"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">   out.println(<span class="string">"星期三"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">   out.println(<span class="string">"星期四"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">   out.println(<span class="string">"星期五"</span>);</span><br><span class="line">   <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">   out.println(<span class="string">"星期六"</span>);</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h3 id="10-循环语句"><a href="#10-循环语句" class="headerlink" title="10.循环语句"></a>10.循环语句</h3><p><strong>可以使用Java的三个基本循环类型：for，while，和 do…while</strong></p>
<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> fontSize; %&gt; </span><br><span class="line"></span><br><span class="line">&lt;h3&gt;For 循环实例&lt;/h3&gt;</span><br><span class="line">&lt;%<span class="keyword">for</span> ( fontSize = <span class="number">1</span>; fontSize &lt;= <span class="number">3</span>; fontSize++)&#123; %&gt;</span><br><span class="line">   &lt;font color=<span class="string">"green"</span> size=<span class="string">"&lt;%= fontSize %&gt;"</span>&gt;</span><br><span class="line">    菜鸟教程</span><br><span class="line">   &lt;/font&gt;&lt;br /&gt;</span><br><span class="line">&lt;%&#125;%&gt;</span><br></pre></td></tr></table></figure>

<h4 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! <span class="keyword">int</span> fontSize=<span class="number">0</span>; %&gt; </span><br><span class="line"></span><br><span class="line">&lt;h3&gt;While 循环实例&lt;/h3&gt;</span><br><span class="line">&lt;%<span class="keyword">while</span> ( fontSize &lt;= <span class="number">3</span>)&#123; %&gt;</span><br><span class="line">   &lt;font color=<span class="string">"green"</span> size=<span class="string">"&lt;%= fontSize %&gt;"</span>&gt;</span><br><span class="line">    菜鸟教程</span><br><span class="line">   &lt;/font&gt;&lt;br /&gt;</span><br><span class="line">&lt;%fontSize++;%&gt;</span><br><span class="line">&lt;%&#125;%&gt;</span><br></pre></td></tr></table></figure>

<h3 id="11-JSP运算符"><a href="#11-JSP运算符" class="headerlink" title="11.JSP运算符"></a>11.JSP运算符</h3><p><strong>JSP支持所有Java逻辑和算术运算符。</strong></p>
<p>下表罗列出了JSP常见运算符，优先级从高到底：</p>
<table>
<thead>
<tr>
<th align="left"><strong>类别</strong></th>
<th align="left"><strong>操作符</strong></th>
<th align="left"><strong>结合性</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">后缀</td>
<td align="left">() [] . (点运算符)</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">一元</td>
<td align="left">++ - - ! ~</td>
<td align="left">右到左</td>
</tr>
<tr>
<td align="left">可乘性</td>
<td align="left">* / %</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">可加性</td>
<td align="left">+ -</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">移位</td>
<td align="left">&gt;&gt; &gt;&gt;&gt; &lt;&lt;</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">关系</td>
<td align="left">&gt; &gt;= &lt; &lt;=</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">相等/不等</td>
<td align="left">== !=</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">位与</td>
<td align="left">&amp;</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">位异或</td>
<td align="left">^</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">位或</td>
<td align="left">|</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">逻辑与</td>
<td align="left">&amp;&amp;</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">逻辑或</td>
<td align="left">||</td>
<td align="left">左到右</td>
</tr>
<tr>
<td align="left">条件判断</td>
<td align="left">?:</td>
<td align="left">右到左</td>
</tr>
<tr>
<td align="left">赋值</td>
<td align="left">= += -= *= /= %= &gt;&gt;= &lt;&lt;= &amp;= ^= |=</td>
<td align="left">右到左</td>
</tr>
<tr>
<td align="left">逗号</td>
<td align="left">,</td>
<td align="left">左到右</td>
</tr>
</tbody></table>
<h3 id="12-JSP-字面量"><a href="#12-JSP-字面量" class="headerlink" title="12.JSP 字面量"></a>12.JSP 字面量</h3><p>JSP语言定义了以下几个字面量：</p>
<ul>
<li>布尔值(boolean)：true 和 false;</li>
<li>整型(int)：与 Java 中的一样;</li>
<li>浮点型(float)：与 Java 中的一样;</li>
<li>字符串(string)：以单引号或双引号开始和结束;</li>
<li>Null：null。</li>
</ul>
<h2 id="六、JSP指令-lt-gt"><a href="#六、JSP指令-lt-gt" class="headerlink" title="六、JSP指令  &lt;%@  %&gt;"></a>六、JSP指令  <code>&lt;%@  %&gt;</code></h2><p><strong>JSP指令用来设置整个JSP页面相关的属性，如网页的编码方式和脚本语言</strong>。</p>
<ul>
<li><p>语法：<code>&lt;%@ directive attribute=&quot;value&quot; %&gt;</code></p>
</li>
<li><p>指令可以有很多个属性，它们以键值对的形式存在，并用逗号隔开。</p>
</li>
</ul>
<p>JSP中的三种指令标签：</p>
<table>
<thead>
<tr>
<th align="left"><strong>指令</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt;%@ page … %&gt;</td>
<td align="left">定义网页依赖属性，比如脚本语言、error页面、缓存需求等等</td>
</tr>
<tr>
<td align="left">&lt;%@ include … %&gt;</td>
<td align="left">包含其他文件</td>
</tr>
<tr>
<td align="left">&lt;%@ taglib … %&gt;</td>
<td align="left">引入标签库的定义</td>
</tr>
</tbody></table>
<h3 id="Page指令"><a href="#Page指令" class="headerlink" title="Page指令"></a>Page指令</h3><p>Page指令为容器提供当前页面的使用说明。一个JSP页面可以包含多个page指令。</p>
<ul>
<li><p>Page指令的语法格式：<code>&lt;%@ page attribute=&quot;value&quot; %&gt;</code></p>
</li>
<li><p>等价的XML格式：<code>&lt;jsp:directive.page attribute=&quot;value&quot; /&gt;</code></p>
</li>
</ul>
<h4 id="与Page指令相关的属性："><a href="#与Page指令相关的属性：" class="headerlink" title="与Page指令相关的属性："></a>与Page指令相关的属性：</h4><table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">buffer</td>
<td align="left">指定out对象使用缓冲区的大小</td>
</tr>
<tr>
<td align="left">autoFlush</td>
<td align="left">控制out对象的 缓存区</td>
</tr>
<tr>
<td align="left">contentType</td>
<td align="left">指定当前JSP页面的MIME类型和字符编码</td>
</tr>
<tr>
<td align="left">errorPage</td>
<td align="left">指定当JSP页面发生异常时需要转向的错误处理页面</td>
</tr>
<tr>
<td align="left">isErrorPage</td>
<td align="left">指定当前页面是否可以作为另一个JSP页面的错误处理页面</td>
</tr>
<tr>
<td align="left">extends</td>
<td align="left">指定servlet从哪一个类继承</td>
</tr>
<tr>
<td align="left">import</td>
<td align="left">导入要使用的Java类</td>
</tr>
<tr>
<td align="left">info</td>
<td align="left">定义JSP页面的描述信息</td>
</tr>
<tr>
<td align="left">isThreadSafe</td>
<td align="left">指定对JSP页面的访问是否为线程安全</td>
</tr>
<tr>
<td align="left">language</td>
<td align="left">定义JSP页面所用的脚本语言，默认是Java</td>
</tr>
<tr>
<td align="left">session</td>
<td align="left">指定JSP页面是否使用session</td>
</tr>
<tr>
<td align="left">isELIgnored</td>
<td align="left">指定是否执行EL表达式</td>
</tr>
<tr>
<td align="left">isScriptingEnabled</td>
<td align="left">确定脚本元素能否被使用</td>
</tr>
</tbody></table>
<h3 id="Include指令"><a href="#Include指令" class="headerlink" title="Include指令"></a>Include指令</h3><p>JSP可以通过include指令来包含其他文件。</p>
<ul>
<li>被包含的文件可以是JSP文件、HTML文件或文本文件。</li>
<li>包含的文件就好像是该JSP文件的一部分，会被同时编译执行。</li>
</ul>
<ul>
<li><p>语法：<code>&lt;%@ include file=&quot;文件相对 url 地址&quot; %&gt;</code></p>
<ul>
<li><p><strong>include</strong> 指令中的文件名实际上是一个相对的 URL 地址。</p>
</li>
<li><p>如果没有给文件关联一个路径，JSP编译器默认在当前路径下寻找。</p>
</li>
</ul>
</li>
<li><p>等价的XML语法：<code>&lt;jsp:directive.include file=&quot;文件相对 url 地址&quot; /&gt;</code></p>
</li>
</ul>
<h3 id="Taglib指令"><a href="#Taglib指令" class="headerlink" title="Taglib指令"></a>Taglib指令</h3><p>JSP API允许用户自定义标签，一个自定义标签库就是自定义标签的集合。</p>
<p>Taglib指令引入一个自定义标签集合的定义，包括库路径、自定义标签。</p>
<ul>
<li><p>Taglib指令的语法：<code>&lt;%@ taglib uri=&quot;uri&quot; prefix=&quot;prefixOfTag&quot; %&gt;</code></p>
<ul>
<li>uri属性确定标签库的位置，</li>
<li>prefix属性指定标签库的前缀。</li>
</ul>
</li>
<li><p>等价的XML语法：<code>&lt;jsp:directive.taglib uri=&quot;uri&quot; prefix=&quot;prefixOfTag&quot; /&gt;</code></p>
</li>
</ul>
<h2 id="七、JSP-动作元素"><a href="#七、JSP-动作元素" class="headerlink" title="七、JSP 动作元素"></a>七、JSP 动作元素</h2><p>与JSP指令元素不同的是，<strong>JSP动作元素在请求处理阶段起作用</strong></p>
<ul>
<li><p>它能够动态插入一个文件，重用JavaBean组件，引导用户去另一个页面，为Java插件产生相关的HTML等等。</p>
</li>
<li><p>JSP动作元素是用XML语法写成的，它严格遵守XML标准</p>
<ul>
<li><code>&lt;jsp:action_name attribute=&quot;value&quot; /&gt;</code></li>
</ul>
</li>
<li><p>行为标签基本上是一些预先就定义好的函数</p>
<ul>
<li>用JSP作为前缀</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">jsp:include</td>
<td align="left">在页面被请求的时候引入一个文件。</td>
</tr>
<tr>
<td align="left">jsp:useBean</td>
<td align="left">寻找或者实例化一个JavaBean。</td>
</tr>
<tr>
<td align="left">jsp:setProperty</td>
<td align="left">设置JavaBean的属性。</td>
</tr>
<tr>
<td align="left">jsp:getProperty</td>
<td align="left">输出某个JavaBean的属性。</td>
</tr>
<tr>
<td align="left">jsp:forward</td>
<td align="left">把请求转到一个新的页面。</td>
</tr>
<tr>
<td align="left">jsp:plugin</td>
<td align="left">根据浏览器类型为Java插件生成OBJECT或EMBED标记。</td>
</tr>
<tr>
<td align="left">jsp:element</td>
<td align="left">定义动态XML元素</td>
</tr>
<tr>
<td align="left">jsp:attribute</td>
<td align="left">设置动态定义的XML元素属性。</td>
</tr>
<tr>
<td align="left">jsp:body</td>
<td align="left">设置动态定义的XML元素内容。</td>
</tr>
<tr>
<td align="left">jsp:text</td>
<td align="left">在JSP页面和文档中使用写入文本的模板</td>
</tr>
</tbody></table>
<h3 id="常见的属性"><a href="#常见的属性" class="headerlink" title="常见的属性"></a>常见的属性</h3><p>所有的动作要素都有两个属性：id属性和scope属性。</p>
<ul>
<li>id属性：<ul>
<li>id属性是动作元素的唯一标识，可以在JSP页面中引用。</li>
<li>动作元素创建的id值可以通过PageContext来调用。</li>
</ul>
</li>
<li>scope属性：<ul>
<li>该属性用于识别动作元素的生命周期。</li>
<li>id属性和scope属性有直接关系，scope属性定义了相关联id对象的寿命。</li>
<li>scope属性有四个可能的值： (a) page, (b)request, (c)session, 和 (d) application。</li>
</ul>
</li>
</ul>
<h3 id="lt-jsp-include-gt-动作元素"><a href="#lt-jsp-include-gt-动作元素" class="headerlink" title="&lt;jsp:include&gt;动作元素"></a><code>&lt;jsp:include&gt;</code>动作元素</h3><p>用来包含静态和动态的文件。该动作把指定文件插入正在生成的页面。</p>
<ul>
<li>语法：<code>&lt;jsp:include page=&quot;相对 URL 地址&quot; flush=&quot;true&quot; /&gt;</code></li>
</ul>
<blockquote>
<ul>
<li>include指令，它是在JSP文件被转换成Servlet的时候引入文件</li>
<li>这里的jsp:include动作不同，插入文件的时间是在页面被请求的时候。</li>
</ul>
</blockquote>
<p>include动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">page</td>
<td align="left">包含在页面中的相对URL地址。</td>
</tr>
<tr>
<td align="left">flush</td>
<td align="left">布尔属性，定义在包含资源前是否刷新缓存区。</td>
</tr>
</tbody></table>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>date.jsp文件代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">   今天的日期是: &lt;%= (<span class="keyword">new</span> java.util.Date()).toLocaleString()%&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p>main.jsp文件代码：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:include page=<span class="string">"date.jsp"</span> flush=<span class="string">"true"</span> /&gt;</span><br></pre></td></tr></table></figure>

<h3 id="lt-jsp-useBean-gt-动作元素"><a href="#lt-jsp-useBean-gt-动作元素" class="headerlink" title="&lt;jsp:useBean&gt;动作元素"></a><code>&lt;jsp:useBean&gt;</code>动作元素</h3><p><strong>用来加载一个将在JSP页面中使用的JavaBean</strong></p>
<ul>
<li>这个功能非常有用，因为它使得我们可以发挥 Java 组件复用的优势</li>
<li>最简单的语法:<code>&lt;jsp:useBean id=&quot;name&quot; class=&quot;package.class&quot; /&gt;</code></li>
</ul>
<p><strong>在类载入后</strong>，我们既可以通过 <code>jsp:setProperty 和 jsp:getProperty 动作来修改和检索bean的属性</code>。</p>
<p>useBean动作相关的属性列表。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">class</td>
<td align="left">指定Bean的完整包名。</td>
</tr>
<tr>
<td align="left">type</td>
<td align="left">指定将引用该对象变量的类型。</td>
</tr>
<tr>
<td align="left">beanName</td>
<td align="left">通过 java.beans.Beans 的 instantiate() 方法指定Bean的名字。</td>
</tr>
</tbody></table>
<h3 id="lt-jsp-setProperty-gt-动作元素"><a href="#lt-jsp-setProperty-gt-动作元素" class="headerlink" title="&lt;jsp:setProperty&gt;动作元素"></a><code>&lt;jsp:setProperty&gt;</code>动作元素</h3><p><strong>用来设置已经实例化的Bean对象的属性</strong></p>
<p>有两种用法：</p>
<p>第一种，<code>在jsp:useBean元素的外面（后面）使用jsp:setProperty</code></p>
<ul>
<li>此时，不管jsp:useBean是找到了一个现有的Bean，还是新创建了一个Bean实例，jsp:setProperty都会执行</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... /&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:setProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br></pre></td></tr></table></figure>

<p>第二种，<code>把jsp:setProperty放入jsp:useBean元素的内部</code></p>
<ul>
<li>此时，jsp:setProperty只有在新建Bean实例时才会执行，如果是使用现有实例则不执行jsp:setProperty</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">"myName"</span> ... &gt;</span><br><span class="line">...</span><br><span class="line">   &lt;jsp:setProperty name=<span class="string">"myName"</span> property=<span class="string">"someProperty"</span> .../&gt;</span><br><span class="line">&lt;/jsp:useBean&gt;</span><br></pre></td></tr></table></figure>

<p>jsp:setProperty动作有下面四个属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">name属性是必需的。它表示要设置属性的是哪个Bean。</td>
</tr>
<tr>
<td align="left">property</td>
<td align="left">property属性是必需的。它表示要设置哪个属性。有一个特殊用法：如果property的值是”*”，表示所有名字和Bean属性名字匹配的请求参数都将被传递给相应的属性set方法。</td>
</tr>
<tr>
<td align="left">value</td>
<td align="left">value 属性是可选的。该属性用来指定Bean属性的值。字符串数据会在目标类中通过标准的valueOf方法自动转换成数字、boolean、Boolean、 byte、Byte、char、Character。例如，boolean和Boolean类型的属性值（比如”true”）通过 Boolean.valueOf转换，int和Integer类型的属性值（比如”42”）通过Integer.valueOf转换。 　　value和param不能同时使用，但可以使用其中任意一个。</td>
</tr>
<tr>
<td align="left">param</td>
<td align="left">param 是可选的。它指定用哪个请求参数作为Bean属性的值。如果当前请求没有参数，则什么事情也不做，系统不会把null传递给Bean属性的set方法。因此，你可以让Bean自己提供默认属性值，只有当请求参数明确指定了新值时才修改默认属性值。</td>
</tr>
</tbody></table>
<h3 id="lt-jsp-getProperty-gt-动作元素"><a href="#lt-jsp-getProperty-gt-动作元素" class="headerlink" title="&lt;jsp:getProperty&gt;动作元素"></a><code>&lt;jsp:getProperty&gt;</code>动作元素</h3><p><strong>提取指定Bean属性的值，转换成字符串，然后输出</strong></p>
<p>语法格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id&#x3D;&quot;myName&quot; ... &#x2F;&gt;</span><br><span class="line">...</span><br><span class="line">&lt;jsp:getProperty name&#x3D;&quot;myName&quot; property&#x3D;&quot;someProperty&quot; ...&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>与getProperty相关联的属性：</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">name</td>
<td align="left">要检索的Bean属性名称。Bean必须已定义。</td>
</tr>
<tr>
<td align="left">property</td>
<td align="left">表示要提取Bean属性的值</td>
</tr>
</tbody></table>
<h3 id="lt-jsp-forward-gt-动作元素"><a href="#lt-jsp-forward-gt-动作元素" class="headerlink" title="&lt;jsp:forward&gt; 动作元素"></a><code>&lt;jsp:forward&gt;</code> 动作元素</h3><p><strong>把请求转到另外的页面。</strong></p>
<ul>
<li>语法：<code>&lt;jsp:forward page=&quot;相对 URL 地址&quot; /&gt;</code></li>
<li>只有一个属性page</li>
</ul>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">page</td>
<td align="left">page属性包含的是一个相对URL。page的值既可以直接给出，也可以在请求的时候动态计算，可以是一个JSP页面或者一个 Java Servlet.</td>
</tr>
</tbody></table>
<h3 id="lt-jsp-plugin-gt-动作元素"><a href="#lt-jsp-plugin-gt-动作元素" class="headerlink" title="&lt;jsp:plugin&gt;动作元素"></a><code>&lt;jsp:plugin&gt;</code>动作元素</h3><p><strong>用来根据浏览器的类型，插入通过Java插件 运行Java Applet所必需的OBJECT或EMBED元素</strong></p>
<ul>
<li>如果需要的插件不存在，它会下载插件，然后执行Java组件。</li>
<li>Java组件可以是一个applet或一个JavaBean。</li>
<li>plugin动作有多个对应HTML元素的属性用于格式化Java 组件。</li>
<li>param元素可用于向Applet 或 Bean 传递参数</li>
</ul>
<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:plugin type=<span class="string">"applet"</span> codebase=<span class="string">"dirname"</span> code=<span class="string">"MyApplet.class"</span></span><br><span class="line">                           width=<span class="string">"60"</span> height=<span class="string">"80"</span>&gt;</span><br><span class="line">   &lt;jsp:param name=<span class="string">"fontcolor"</span> value=<span class="string">"red"</span> /&gt;</span><br><span class="line">   &lt;jsp:param name=<span class="string">"background"</span> value=<span class="string">"black"</span> /&gt;</span><br><span class="line"> </span><br><span class="line">   &lt;jsp:fallback&gt;</span><br><span class="line">      Unable to initialize Java Plugin</span><br><span class="line">   &lt;/jsp:fallback&gt;</span><br><span class="line"> &lt;%-- &lt;fallback&gt;元素是一个新元素，在组件出现故障的错误时发送给用户错误信息。--%&gt;</span><br><span class="line">&lt;/jsp:plugin&gt;</span><br></pre></td></tr></table></figure>

<h3 id="lt-jsp-element-gt-lt-jsp-attribute-gt-lt-jsp-body-gt"><a href="#lt-jsp-element-gt-lt-jsp-attribute-gt-lt-jsp-body-gt" class="headerlink" title="&lt;jsp:element&gt;,&lt;jsp:attribute&gt;,&lt;jsp:body&gt;"></a><code>&lt;jsp:element&gt;,&lt;jsp:attribute&gt;,&lt;jsp:body&gt;</code></h3><p>他们动态定义XML元素。</p>
<p>动态是非常重要的，这就意味着<strong>XML元素在编译时是动态生成的而非静态</strong>。</p>
<h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;动态定义了XML元素</span><br><span class="line">&lt;%@ page language&#x3D;&quot;java&quot; contentType&#x3D;&quot;text&#x2F;html; charset&#x3D;UTF-8&quot;</span><br><span class="line">    pageEncoding&#x3D;&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:element name&#x3D;&quot;xmlElement&quot;&gt;</span><br><span class="line">&lt;jsp:attribute name&#x3D;&quot;xmlElementAttr&quot;&gt;</span><br><span class="line">   属性值</span><br><span class="line">&lt;&#x2F;jsp:attribute&gt;</span><br><span class="line">&lt;jsp:body&gt;</span><br><span class="line">   XML 元素的主体</span><br><span class="line">&lt;&#x2F;jsp:body&gt;</span><br><span class="line">&lt;&#x2F;jsp:element&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="lt-jsp-text-gt-动作元素"><a href="#lt-jsp-text-gt-动作元素" class="headerlink" title="&lt;jsp:text&gt;动作元素"></a><code>&lt;jsp:text&gt;</code>动作元素</h3><p><strong>它允许在JSP页面和文档中使用写入文本的模板</strong></p>
<ul>
<li><p>语法格式如下：<code>&lt;jsp:text&gt;模板数据&lt;/jsp:text&gt;</code></p>
</li>
<li><p>文本模板不能包含重复元素，只能包含文本和EL表达式</p>
</li>
</ul>
<h2 id="八、隐式对象"><a href="#八、隐式对象" class="headerlink" title="八、隐式对象"></a>八、隐式对象</h2><p>JSP隐式对象是<strong>JSP容器为每个页面提供的Java对象</strong>，开发者可以直接使用它们而不用显式声明。</p>
<ul>
<li><p>JSP隐式对象也被称为预定义变量</p>
</li>
<li><p>JSP所支持的九大隐式对象：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left"><strong>对象</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">request</td>
<td align="left"><strong>HttpServletRequest</strong> 接口的实例</td>
</tr>
<tr>
<td align="left">response</td>
<td align="left"><strong>HttpServletResponse</strong> 接口的实例</td>
</tr>
<tr>
<td align="left">out</td>
<td align="left"><strong>JspWriter</strong>类的实例，用于把结果输出至网页上</td>
</tr>
<tr>
<td align="left">session</td>
<td align="left"><strong>HttpSession</strong>类的实例</td>
</tr>
<tr>
<td align="left">application</td>
<td align="left"><strong>ServletContext</strong>类的实例，与应用上下文有关</td>
</tr>
<tr>
<td align="left">config</td>
<td align="left"><strong>ServletConfig</strong>类的实例</td>
</tr>
<tr>
<td align="left">pageContext</td>
<td align="left"><strong>PageContext</strong>类的实例，提供对JSP页面所有对象以及命名空间的访问</td>
</tr>
<tr>
<td align="left">page</td>
<td align="left">类似于Java类中的this关键字</td>
</tr>
<tr>
<td align="left">Exception</td>
<td align="left"><strong>Exception</strong>类的对象，代表发生错误的JSP页面中对应的异常对象</td>
</tr>
</tbody></table>
<h3 id="request对象"><a href="#request对象" class="headerlink" title="request对象"></a>request对象</h3><p>request对象是<code>javax.servlet.http.HttpServletRequest 类</code>的实例。</p>
<ul>
<li><p>每当客户端请求一个JSP页面时，JSP引擎就会制造一个新的request对象来代表这个请求。</p>
</li>
<li><p>request对象提供了一系列方法来获取HTTP头信息，cookies，HTTP方法等等。</p>
</li>
</ul>
<h3 id="response对象"><a href="#response对象" class="headerlink" title="response对象"></a>response对象</h3><p>response对象是<code>javax.servlet.http.HttpServletResponse类</code>的实例。</p>
<ul>
<li><p>当服务器创建request对象时会同时创建用于响应这个客户端的response对象。</p>
</li>
<li><p>response对象也定义了处理HTTP头模块的接口。</p>
</li>
<li><p>通过这个对象，开发者们可以添加新的cookies，时间戳，HTTP状态码等等。</p>
</li>
</ul>
<h3 id="out对象"><a href="#out对象" class="headerlink" title="out对象"></a>out对象</h3><p>out对象是 <code>javax.servlet.jsp.JspWriter 类</code>的实例，</p>
<ul>
<li>用来在response对象中写入内容。</li>
</ul>
<p>最初的JspWriter类对象根据页面是否有缓存来进行不同的实例化操作。</p>
<ul>
<li><p>可以在page指令中使用buffered=’false’属性来轻松关闭缓存。</p>
</li>
<li><p>JspWriter类包含了大部分java.io.PrintWriter类中的方法。</p>
<ul>
<li>不过，JspWriter新增了一些专为处理缓存而设计的方法。</li>
<li>还有就是，JspWriter类会抛出IOExceptions异常，而PrintWriter不会。</li>
</ul>
</li>
</ul>
<h4 id="输出方法"><a href="#输出方法" class="headerlink" title="输出方法"></a>输出方法</h4><p>来输出boolean，char，int，double，String，object等类型数据的重要方法：</p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>out.print(dataType dt)</strong></td>
<td align="left">输出Type类型的值</td>
</tr>
<tr>
<td align="left"><strong>out.println(dataType dt)</strong></td>
<td align="left">输出Type类型的值然后换行</td>
</tr>
<tr>
<td align="left"><strong>out.flush()</strong></td>
<td align="left">刷新输出流</td>
</tr>
</tbody></table>
<h3 id="session对象"><a href="#session对象" class="headerlink" title="session对象"></a>session对象</h3><p>session对象是 <code>javax.servlet.http.HttpSession 类</code>的实例。</p>
<ul>
<li><p>和Java Servlets中的session对象有一样的行为。</p>
</li>
<li><p>session对象用来跟踪在各个客户端请求间的会话。</p>
</li>
</ul>
<h3 id="application对象"><a href="#application对象" class="headerlink" title="application对象"></a>application对象</h3><p>application对象是<code>javax.servlet.ServletContext 类</code>的实例，直接<code>包装了servlet的ServletContext类的对象</code>。</p>
<ul>
<li><p>这个对象在JSP页面的整个生命周期中都代表着这个JSP页面。</p>
</li>
<li><p>这个对象在JSP页面初始化时被创建，随着jspDestroy()方法的调用而被移除。</p>
</li>
<li><p>通过向application中添加属性，则所有组成您web应用的JSP文件都能访问到这些属性。</p>
</li>
</ul>
<h3 id="config对象"><a href="#config对象" class="headerlink" title="config对象"></a>config对象</h3><p>config对象是 <code>javax.servlet.ServletConfig 类</code>的实例，<code>直接包装了servlet的ServletConfig类的对象</code>。</p>
<ul>
<li><p>这个对象允许开发者访问Servlet或者JSP引擎的初始化参数，比如文件路径等。</p>
</li>
<li><p>config对象的使用方法，不是很重要，所以不常用：<code>config.getServletName();</code></p>
<ul>
<li>它返回包含在<code>&lt;servlet-name&gt;</code>元素中的servlet名字，</li>
<li>注意，<code>&lt;servlet-name&gt;</code>元素在 WEB-INF\web.xml 文件中定义</li>
</ul>
</li>
</ul>
<h3 id="pageContext-对象"><a href="#pageContext-对象" class="headerlink" title="pageContext 对象"></a>pageContext 对象</h3><p>pageContext对象是<code>javax.servlet.jsp.PageContext 类</code>的实例，</p>
<ul>
<li><p>用来代表整个JSP页面。</p>
</li>
<li><p>主要用来访问页面信息，同时过滤掉大部分实现细节。</p>
</li>
<li><p>这个对象存储了request对象和response对象的引用。</p>
<ul>
<li>application对象，config对象，session对象，out对象可以通过访问这个对象的属性来导出。</li>
</ul>
</li>
<li><p>也包含了传给JSP页面的指令信息</p>
<ul>
<li>包括缓存信息，ErrorPage URL,页面scope等。</li>
</ul>
</li>
<li><p>PageContext类定义了一些字段，</p>
<ul>
<li>包括PAGE_SCOPE，REQUEST_SCOPE，SESSION_SCOPE， APPLICATION_SCOPE。</li>
</ul>
</li>
<li><p>它也提供了40余种方法，有一半继承自<code>javax.servlet.jsp.JspContext 类</code>。</p>
<ul>
<li>其中一个重要的方法就是 removeAttribute()，它可接受一个或两个参数。<ul>
<li>比如，pageContext.removeAttribute(“attrName”) 移除四个scope中相关属性，</li>
<li>但是下面这种方法只移除特定 scope 中的相关属性：<ul>
<li><code>pageContext.removeAttribute(&quot;attrName&quot;, PAGE_SCOPE);</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="page-对象"><a href="#page-对象" class="headerlink" title="page 对象"></a>page 对象</h3><p><strong>这个对象就是页面实例的引用。</strong></p>
<ul>
<li><p>它可以被看做是整个JSP页面的代表。</p>
</li>
<li><p>page 对象就是this对象的同义词。</p>
</li>
</ul>
<h3 id="exception-对象"><a href="#exception-对象" class="headerlink" title="exception 对象"></a>exception 对象</h3><p><strong>exception 对象包装了从先前页面中抛出的异常信息。</strong></p>
<ul>
<li>它通常被用来产生对出错条件的适当响应</li>
</ul>
<h2 id="九、客户端请求与服务器响应"><a href="#九、客户端请求与服务器响应" class="headerlink" title="九、客户端请求与服务器响应"></a>九、客户端请求与服务器响应</h2><h3 id="客户端请求"><a href="#客户端请求" class="headerlink" title="客户端请求"></a>客户端请求</h3><p><strong>当浏览器请求一个网页时，它会向网络服务器发送一系列不能被直接读取的信息，因为这些信息是作为HTTP信息头的一部分来传送的</strong></p>
<p>浏览器端信息头的一些重要内容，在以后的网络编程中将会经常见到这些信息：</p>
<table>
<thead>
<tr>
<th align="left"><strong>信息</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">Accept</td>
<td align="left">指定浏览器或其他客户端可以处理的MIME类型。它的值通常为 <strong>image/png</strong> 或 <strong>image/jpeg</strong></td>
</tr>
<tr>
<td align="left">Accept-Charset</td>
<td align="left">指定浏览器要使用的字符集。比如 ISO-8859-1</td>
</tr>
<tr>
<td align="left">Accept-Encoding</td>
<td align="left">指定编码类型。它的值通常为 <strong>gzip</strong> 或<strong>compress</strong></td>
</tr>
<tr>
<td align="left">Accept-Language</td>
<td align="left">指定客户端首选语言，servlet会优先返回以当前语言构成的结果集，如果servlet支持这种语言的话。比如 en，en-us，ru等等</td>
</tr>
<tr>
<td align="left">Authorization</td>
<td align="left">在访问受密码保护的网页时识别不同的用户</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">表明客户端是否可以处理HTTP持久连接。持久连接允许客户端或浏览器在一个请求中获取多个文件。<strong>Keep-Alive</strong> 表示启用持久连接</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">仅适用于POST请求，表示 POST 数据的字节数</td>
</tr>
<tr>
<td align="left">Cookie</td>
<td align="left">返回先前发送给浏览器的cookies至服务器</td>
</tr>
<tr>
<td align="left">Host</td>
<td align="left">指出原始URL中的主机名和端口号</td>
</tr>
<tr>
<td align="left">If-Modified-Since</td>
<td align="left">表明只有当网页在指定的日期被修改后客户端才需要这个网页。 服务器发送304码给客户端，表示没有更新的资源</td>
</tr>
<tr>
<td align="left">If-Unmodified-Since</td>
<td align="left">与If-Modified-Since相反， 只有文档在指定日期后仍未被修改过，操作才会成功</td>
</tr>
<tr>
<td align="left">Referer</td>
<td align="left">标志着所引用页面的URL。比如，如果你在页面1，然后点了个链接至页面2，那么页面1的URL就会包含在浏览器请求页面2的信息头中</td>
</tr>
<tr>
<td align="left">User-Agent</td>
<td align="left">用来区分不同浏览器或客户端发送的请求，并对不同类型的浏览器返回不同的内容</td>
</tr>
</tbody></table>
<h4 id="HttpServletRequest类"><a href="#HttpServletRequest类" class="headerlink" title="HttpServletRequest类"></a>HttpServletRequest类</h4><p>request对象是<code>javax.servlet.http.HttpServletRequest类</code>的实例。</p>
<ul>
<li><p>每当客户端请求一个页面时，JSP引擎就会产生一个新的对象来代表这个请求。</p>
</li>
<li><p>request对象提供了一系列方法来获取HTTP信息头，</p>
<ul>
<li>包括表单数据，cookies，HTTP方法等等</li>
</ul>
</li>
</ul>
<p>一些在JSP编程中常用的获取HTTP信息头的方法：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Cookie[] getCookies()</strong></td>
<td align="left">返回客户端所有的Cookie的数组</td>
</tr>
<tr>
<td align="left"><strong>Enumeration getAttributeNames()</strong></td>
<td align="left">返回request对象的所有属性名称的集合</td>
</tr>
<tr>
<td align="left"><strong>Enumeration getHeaderNames()</strong></td>
<td align="left">返回所有HTTP头的名称集合</td>
</tr>
<tr>
<td align="left"><strong>Enumeration getParameterNames()</strong></td>
<td align="left">返回请求中所有参数的集合</td>
</tr>
<tr>
<td align="left"><strong>HttpSession getSession()</strong></td>
<td align="left">返回request对应的session对象，如果没有，则创建一个</td>
</tr>
<tr>
<td align="left"><strong>HttpSession getSession(boolean create)</strong></td>
<td align="left">返回request对应的session对象，如果没有并且参数create为true，则返回一个新的session对象</td>
</tr>
<tr>
<td align="left"><strong>Locale getLocale()</strong></td>
<td align="left">返回当前页的Locale对象，可以在response中设置</td>
</tr>
<tr>
<td align="left"><strong>Object getAttribute(String name)</strong></td>
<td align="left">返回名称为name的属性值，如果不存在则返回null。</td>
</tr>
<tr>
<td align="left"><strong>ServletInputStream getInputStream()</strong></td>
<td align="left">返回请求的输入流</td>
</tr>
<tr>
<td align="left"><strong>String getAuthType()</strong></td>
<td align="left">返回认证方案的名称，用来保护servlet，比如 “BASIC” 或者 “SSL” 或 null 如果 JSP没设置保护措施</td>
</tr>
<tr>
<td align="left"><strong>String getCharacterEncoding()</strong></td>
<td align="left">返回request的字符编码集名称</td>
</tr>
<tr>
<td align="left"><strong>String getContentType()</strong></td>
<td align="left">返回request主体的MIME类型，若未知则返回null</td>
</tr>
<tr>
<td align="left"><strong>String getContextPath()</strong></td>
<td align="left">返回request URI中指明的上下文路径</td>
</tr>
<tr>
<td align="left"><strong>String getHeader(String name)</strong></td>
<td align="left">返回name指定的信息头</td>
</tr>
<tr>
<td align="left"><strong>String getMethod()</strong></td>
<td align="left">返回此request中的HTTP方法，比如 GET,，POST，或PUT</td>
</tr>
<tr>
<td align="left"><strong>String getParameter(String name)</strong></td>
<td align="left">返回此request中name指定的参数，若不存在则返回null</td>
</tr>
<tr>
<td align="left"><strong>String getPathInfo()</strong></td>
<td align="left">返回任何额外的与此request URL相关的路径</td>
</tr>
<tr>
<td align="left"><strong>String getProtocol()</strong></td>
<td align="left">返回此request所使用的协议名和版本</td>
</tr>
<tr>
<td align="left"><strong>String getQueryString()</strong></td>
<td align="left">返回此 request URL包含的查询字符串</td>
</tr>
<tr>
<td align="left"><strong>String getRemoteAddr()</strong></td>
<td align="left">返回客户端的IP地址</td>
</tr>
<tr>
<td align="left"><strong>String getRemoteHost()</strong></td>
<td align="left">返回客户端的完整名称</td>
</tr>
<tr>
<td align="left"><strong>String getRemoteUser()</strong></td>
<td align="left">返回客户端通过登录认证的用户，若用户未认证则返回null</td>
</tr>
<tr>
<td align="left"><strong>String getRequestURI()</strong></td>
<td align="left">返回request的URI</td>
</tr>
<tr>
<td align="left"><strong>String getRequestedSessionId()</strong></td>
<td align="left">返回request指定的session ID</td>
</tr>
<tr>
<td align="left"><strong>String getServletPath()</strong></td>
<td align="left">返回所请求的servlet路径</td>
</tr>
<tr>
<td align="left"><strong>String[] getParameterValues(String name)</strong></td>
<td align="left">返回指定名称的参数的所有值，若不存在则返回null</td>
</tr>
<tr>
<td align="left"><strong>boolean isSecure()</strong></td>
<td align="left">返回request是否使用了加密通道，比如HTTPS</td>
</tr>
<tr>
<td align="left"><strong>int getContentLength()</strong></td>
<td align="left">返回request主体所包含的字节数，若未知的返回-1</td>
</tr>
<tr>
<td align="left"><strong>int getIntHeader(String name)</strong></td>
<td align="left">返回指定名称的request信息头的值</td>
</tr>
<tr>
<td align="left"><strong>int getServerPort()</strong></td>
<td align="left">返回服务器端口号</td>
</tr>
</tbody></table>
<h4 id="读取HTTP信息头"><a href="#读取HTTP信息头" class="headerlink" title="读取HTTP信息头"></a>读取HTTP信息头</h4><p>使用HttpServletRequest类的getHeaderNames()方法来读取HTTP信息头</p>
<ul>
<li>这个方法以枚举的形式返回当前HTTP请求的头信息。</li>
<li>获取Enumeration对象后，用标准的方式来遍历Enumeration对象，</li>
<li>用hasMoreElements()方法来确定什么时候停止，</li>
<li>用nextElement()方法来获得每个参数的名字</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;HTTP 头部请求实例&lt;/h2&gt;</span><br><span class="line">&lt;table width=<span class="string">"100%"</span> border=<span class="string">"1"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">&lt;tr bgcolor=<span class="string">"#949494"</span>&gt;</span><br><span class="line">&lt;th&gt;Header Name&lt;/th&gt;&lt;th&gt;Header Value(s)&lt;/th&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Enumeration headerNames = request.getHeaderNames();</span><br><span class="line">   <span class="keyword">while</span>(headerNames.hasMoreElements()) &#123;</span><br><span class="line">      String paramName = (String)headerNames.nextElement();</span><br><span class="line">      out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">      String paramValue = request.getHeader(paramName);</span><br><span class="line">      out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="服务器响应"><a href="#服务器响应" class="headerlink" title="服务器响应"></a>服务器响应</h3><p><strong>Response响应对象主要将JSP容器处理后的结果传回到客户端</strong>。</p>
<ul>
<li><p>可以通过response变量设置HTTP的状态和向客户端发送数据，如Cookie、HTTP文件头信息等。</p>
</li>
<li><p>状态行包含HTTP版本信息，</p>
<ul>
<li>比如HTTP/1.1，一个状态码，</li>
<li>比如200，还有一个非常短的信息对应着状态码，</li>
<li>比如OK。</li>
</ul>
</li>
</ul>
<p><strong>HTTP1.1响应头中最有用的部分：</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>响应头</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">Allow</td>
<td align="left">指定服务器支持的request方法（GET，POST等等）</td>
</tr>
<tr>
<td align="left">Cache-Control</td>
<td align="left">指定响应文档能够被安全缓存的情况。通常取值为 <strong>public**</strong>，<strong>**private</strong> 或<strong>no-cache</strong> 等等。 Public意味着文档可缓存，Private意味着文档只为单用户服务并且只能使用私有缓存。No-cache 意味着文档不被缓存。</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">命令浏览器是否要使用持久的HTTP连接。<strong>close**</strong>值** 命令浏览器不使用持久HTTP连接，而keep-alive 意味着使用持久化连接。</td>
</tr>
<tr>
<td align="left">Content-Disposition</td>
<td align="left">让浏览器要求用户将响应以给定的名称存储在磁盘中</td>
</tr>
<tr>
<td align="left">Content-Encoding</td>
<td align="left">指定传输时页面的编码规则</td>
</tr>
<tr>
<td align="left">Content-Language</td>
<td align="left">表述文档所使用的语言，比如en， en-us,，ru等等</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">表明响应的字节数。只有在浏览器使用持久化 (keep-alive) HTTP 连接时才有用</td>
</tr>
<tr>
<td align="left">Content-Type</td>
<td align="left">表明文档使用的MIME类型</td>
</tr>
<tr>
<td align="left">Expires</td>
<td align="left">指明啥时候过期并从缓存中移除</td>
</tr>
<tr>
<td align="left">Last-Modified</td>
<td align="left">指明文档最后修改时间。客户端可以 缓存文档并且在后续的请求中提供一个 <strong>If-Modified-Since</strong>请求头</td>
</tr>
<tr>
<td align="left">Location</td>
<td align="left">在300秒内，包含所有的有一个状态码的响应地址，浏览器会自动重连然后检索新文档</td>
</tr>
<tr>
<td align="left">Refresh</td>
<td align="left">指明浏览器每隔多久请求更新一次页面。</td>
</tr>
<tr>
<td align="left">Retry-After</td>
<td align="left">与503 (Service Unavailable)一起使用来告诉用户多久后请求将会得到响应</td>
</tr>
<tr>
<td align="left">Set-Cookie</td>
<td align="left">指明当前页面对应的cookie</td>
</tr>
</tbody></table>
<h4 id="HttpServletResponse类"><a href="#HttpServletResponse类" class="headerlink" title="HttpServletResponse类"></a>HttpServletResponse类</h4><p>response 对象是 <code>javax.servlet.http.HttpServletResponse 类</code>的一个实例。</p>
<ul>
<li><p>就像服务器会创建request对象一样，它也会创建一个客户端响应。</p>
</li>
<li><p>response对象定义了处理创建HTTP信息头的接口。</p>
<ul>
<li>通过使用这个对象，开发者们可以添加新的cookie或时间戳，还有HTTP状态码等等</li>
</ul>
</li>
</ul>
<p><strong>设置HTTP响应头的方法</strong>，（由HttpServletResponse 类提供）：</p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">1  <strong>String encodeRedirectURL(String url)</strong></td>
<td align="left">对sendRedirect()方法使用的URL进行编码</td>
</tr>
<tr>
<td align="left">2 <strong>String encodeURL(String url)</strong></td>
<td align="left">将URL编码，回传包含Session ID的URL</td>
</tr>
<tr>
<td align="left">3 <strong>boolean containsHeader(String name)</strong></td>
<td align="left">返回指定的响应头是否存在</td>
</tr>
<tr>
<td align="left">4 <strong>boolean isCommitted()</strong></td>
<td align="left">返回响应是否已经提交到客户端</td>
</tr>
<tr>
<td align="left">5 <strong>void addCookie(Cookie cookie)</strong></td>
<td align="left">添加指定的cookie至响应中</td>
</tr>
<tr>
<td align="left">6 <strong>void addDateHeader(String name, long date)</strong></td>
<td align="left">添加指定名称的响应头和日期值</td>
</tr>
<tr>
<td align="left">7 <strong>void addHeader(String name, String value)</strong></td>
<td align="left">添加指定名称的响应头和值</td>
</tr>
<tr>
<td align="left">8 <strong>void addIntHeader(String name, int value)</strong></td>
<td align="left">添加指定名称的响应头和int值</td>
</tr>
<tr>
<td align="left">9 <strong>void flushBuffer()</strong></td>
<td align="left">将任何缓存中的内容写入客户端</td>
</tr>
<tr>
<td align="left">10 <strong>void reset()</strong></td>
<td align="left">清除任何缓存中的任何数据，包括状态码和各种响应头</td>
</tr>
<tr>
<td align="left">11 <strong>void resetBuffer()</strong></td>
<td align="left">清除基本的缓存数据，不包括响应头和状态码</td>
</tr>
<tr>
<td align="left">12 <strong>void sendError(int sc)</strong></td>
<td align="left">使用指定的状态码向客户端发送一个出错响应，然后清除缓存</td>
</tr>
<tr>
<td align="left">13 <strong>void sendError(int sc, String msg)</strong></td>
<td align="left">使用指定的状态码和消息向客户端发送一个出错响应</td>
</tr>
<tr>
<td align="left">14 <strong>void sendRedirect(String location)</strong></td>
<td align="left">使用指定的URL向客户端发送一个临时的间接响应</td>
</tr>
<tr>
<td align="left">15 <strong>void setBufferSize(int size)</strong></td>
<td align="left">设置响应体的缓存区大小</td>
</tr>
<tr>
<td align="left">16 <strong>void setCharacterEncoding(String charset)</strong></td>
<td align="left">指定响应的编码集（MIME字符集），例如UTF-8</td>
</tr>
<tr>
<td align="left">17 <strong>void setContentLength(int len)</strong></td>
<td align="left">指定HTTP servlets中响应的内容的长度，此方法用来设置 HTTP Content-Length 信息头</td>
</tr>
<tr>
<td align="left">18 <strong>void setContentType(String type)</strong></td>
<td align="left">设置响应的内容的类型，如果响应还未被提交的话</td>
</tr>
<tr>
<td align="left">19 <strong>void setDateHeader(String name, long date)</strong></td>
<td align="left">使用指定名称和值设置响应头的名称和内容</td>
</tr>
<tr>
<td align="left">20 <strong>void setHeader(String name, String value)</strong></td>
<td align="left">使用指定名称和值设置响应头的名称和内容</td>
</tr>
<tr>
<td align="left">21 <strong>void setIntHeader(String name, int value)</strong></td>
<td align="left">指定 int 类型的值到 name 标头</td>
</tr>
<tr>
<td align="left">22 <strong>void setLocale(Locale loc)</strong></td>
<td align="left">设置响应的语言环境，如果响应尚未被提交的话</td>
</tr>
<tr>
<td align="left">23 <strong>void setStatus(int sc)</strong></td>
<td align="left">设置响应的状态码</td>
</tr>
</tbody></table>
<h4 id="HTTP响应头程序示例"><a href="#HTTP响应头程序示例" class="headerlink" title="HTTP响应头程序示例"></a>HTTP响应头程序示例</h4><p><strong>使用setIntHeader()方法和setRefreshHeader()方法来模拟一个数字时钟</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=<span class="string">"utf-8"</span>&gt;</span><br><span class="line">&lt;title&gt;菜鸟教程(runoob.com)&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;自动刷新实例&lt;/h2&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 设置每隔5秒自动刷新</span></span><br><span class="line">   response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">   <span class="comment">// 获取当前时间</span></span><br><span class="line">   Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line">   String am_pm;</span><br><span class="line">   <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);</span><br><span class="line">   <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">   <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);</span><br><span class="line">   <span class="keyword">if</span>(calendar.get(Calendar.AM_PM) == <span class="number">0</span>)</span><br><span class="line">      am_pm = <span class="string">"AM"</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      am_pm = <span class="string">"PM"</span>;</span><br><span class="line">   String CT = hour+<span class="string">":"</span>+ minute +<span class="string">":"</span>+ second +<span class="string">" "</span>+ am_pm;</span><br><span class="line">   out.println(<span class="string">"当前时间: "</span> + CT + <span class="string">"\n"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十、HTTP-状态码"><a href="#十、HTTP-状态码" class="headerlink" title="十、HTTP 状态码"></a>十、HTTP 状态码</h2><p><strong>HTTP请求与HTTP响应的格式相近，都有着如下结构</strong>：</p>
<ul>
<li>以状态行+CRLF（回车换行）开始</li>
<li>零行或多行头模块+CRLF</li>
<li>一个空行，比如CRLF</li>
<li>可选的消息体比如文件，查询数据，查询输出</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个服务器响应头看起来就像下面这样</span></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Header2: ...</span><br><span class="line">...</span><br><span class="line">HeaderN: ...</span><br><span class="line">  (Blank Line)</span><br><span class="line">&lt;!doctype ...&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;...&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">...</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>状态行包含HTTP版本，一个状态码，和状态码相对应的短消息</strong></p>
<h3 id="各种状态码"><a href="#各种状态码" class="headerlink" title="各种状态码"></a>各种状态码</h3><p>从服务器返回的HTTP状态码和与之关联的消息：</p>
<table>
<thead>
<tr>
<th align="left"><strong>状态码</strong></th>
<th align="left"><strong>消息</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">100</td>
<td align="left">Continue</td>
<td align="left">只有一部分请求被服务器接收，但只要没被服务器拒绝，客户端就会延续这个请求</td>
</tr>
<tr>
<td align="left">101</td>
<td align="left">Switching Protocols</td>
<td align="left">服务器交换机协议</td>
</tr>
<tr>
<td align="left">200</td>
<td align="left">OK</td>
<td align="left">请求被确认</td>
</tr>
<tr>
<td align="left">201</td>
<td align="left">Created</td>
<td align="left">请求时完整的，新的资源被创建</td>
</tr>
<tr>
<td align="left">202</td>
<td align="left">Accepted</td>
<td align="left">请求被接受，但未处理完</td>
</tr>
<tr>
<td align="left">203</td>
<td align="left">Non-authoritative Information</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">204</td>
<td align="left">No Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">205</td>
<td align="left">Reset Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">Partial Content</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">300</td>
<td align="left">Multiple Choices</td>
<td align="left">一个超链接表，用户可以选择一个超链接并访问，最大支持5个超链接</td>
</tr>
<tr>
<td align="left">301</td>
<td align="left">Moved Permanently</td>
<td align="left">被请求的页面已经移动到了新的URL下</td>
</tr>
<tr>
<td align="left">302</td>
<td align="left">Found</td>
<td align="left">被请求的页面暂时性地移动到了新的URL下</td>
</tr>
<tr>
<td align="left">303</td>
<td align="left">See Other</td>
<td align="left">被请求的页面可以在一个不同的URL下找到</td>
</tr>
<tr>
<td align="left">304</td>
<td align="left">Not Modified</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">305</td>
<td align="left">Use Proxy</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">306</td>
<td align="left"><em>Unused</em></td>
<td align="left">已经不再使用此状态码，但状态码被保留</td>
</tr>
<tr>
<td align="left">307</td>
<td align="left">Temporary Redirect</td>
<td align="left">被请求的页面暂时性地移动到了新的URL下</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">Bad Request</td>
<td align="left">服务器无法识别请求</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">Unauthorized</td>
<td align="left">被请求的页面需要用户名和密码</td>
</tr>
<tr>
<td align="left">402</td>
<td align="left">Payment Required</td>
<td align="left"><em>目前还不能使用此状态码</em></td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">Forbidden</td>
<td align="left">禁止访问所请求的页面</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">Not Found</td>
<td align="left">服务器无法找到所请求的页面</td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">Method Not Allowed</td>
<td align="left">请求中所指定的方法不被允许</td>
</tr>
<tr>
<td align="left">406</td>
<td align="left">Not Acceptable</td>
<td align="left">服务器只能创建一个客户端无法接受的响应</td>
</tr>
<tr>
<td align="left">407</td>
<td align="left">Proxy Authentication Required</td>
<td align="left">在请求被服务前必须认证一个代理服务器</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">Request Timeout</td>
<td align="left">请求时间超过了服务器所能等待的时间，连接被断开</td>
</tr>
<tr>
<td align="left">409</td>
<td align="left">Conflict</td>
<td align="left">请求有矛盾的地方</td>
</tr>
<tr>
<td align="left">410</td>
<td align="left">Gone</td>
<td align="left">被请求的页面不再可用</td>
</tr>
<tr>
<td align="left">411</td>
<td align="left">Length Required</td>
<td align="left">“Content-Length”没有被定义，服务器拒绝接受请求</td>
</tr>
<tr>
<td align="left">412</td>
<td align="left">Precondition Failed</td>
<td align="left">请求的前提条件被服务器评估为false</td>
</tr>
<tr>
<td align="left">413</td>
<td align="left">Request Entity Too Large</td>
<td align="left">因为请求的实体太大，服务器拒绝接受请求</td>
</tr>
<tr>
<td align="left">414</td>
<td align="left">Request-url Too Long</td>
<td align="left">服务器拒绝接受请求，因为URL太长。多出现在把”POST”请求转换为”GET”请求时所附带的大量查询信息</td>
</tr>
<tr>
<td align="left">415</td>
<td align="left">Unsupported Media Type</td>
<td align="left">服务器拒绝接受请求，因为媒体类型不被支持</td>
</tr>
<tr>
<td align="left">417</td>
<td align="left">Expectation Failed</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">500</td>
<td align="left">Internal Server Error</td>
<td align="left">请求不完整，服务器遇见了出乎意料的状况</td>
</tr>
<tr>
<td align="left">501</td>
<td align="left">Not Implemented</td>
<td align="left">请求不完整，服务器不提供所需要的功能</td>
</tr>
<tr>
<td align="left">502</td>
<td align="left">Bad Gateway</td>
<td align="left">请求不完整，服务器从上游服务器接受了一个无效的响应</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">Service Unavailable</td>
<td align="left">请求不完整，服务器暂时重启或关闭</td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">Gateway Timeout</td>
<td align="left">网关超时</td>
</tr>
<tr>
<td align="left">505</td>
<td align="left">HTTP Version Not Supported</td>
<td align="left">服务器不支持所指定的HTTP版本</td>
</tr>
</tbody></table>
<h3 id="设置HTTP状态码的方法"><a href="#设置HTTP状态码的方法" class="headerlink" title="设置HTTP状态码的方法"></a>设置HTTP状态码的方法</h3><p><strong>HttpServletResponse 类中用来设置状态码的方法</strong>：</p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>public void setStatus ( int statusCode )</strong></td>
<td align="left">此方法可以设置任意的状态码。如果您的响应包含一个特殊的状态码和一个文档，请确保在用PrintWriter返回任何内容前调用setStatus方法</td>
</tr>
<tr>
<td align="left"><strong>public void sendRedirect(String url)</strong></td>
<td align="left">此方法产生302响应，同时产生一个 <em>Location</em> 头告诉URL 一个新的文档</td>
</tr>
<tr>
<td align="left"><strong>public void sendError(int code, String message)</strong></td>
<td align="left">此方法将一个状态码(通常为 404)和一个短消息，自动插入HTML文档中并发回给客户端</td>
</tr>
</tbody></table>
<h3 id="HTTP状态码程序示例"><a href="#HTTP状态码程序示例" class="headerlink" title="HTTP状态码程序示例"></a>HTTP状态码程序示例</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//发送407错误码给浏览器，然后浏览器将会告诉您"Need authentication!!!"</span></span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Setting HTTP Status Code&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 设置错误代码，并说明原因</span></span><br><span class="line">   response.sendError(<span class="number">407</span>, <span class="string">"Need authentication!!!"</span> );</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十一、表单处理（POST与GET）"><a href="#十一、表单处理（POST与GET）" class="headerlink" title="十一、表单处理（POST与GET）"></a>十一、表单处理（POST与GET）</h2><p>经常需要向服务器提交信息，并让后台程序处理。</p>
<p>浏览器中使用 GET 和 POST 方法向服务器提交数据。</p>
<h3 id="GET-方法"><a href="#GET-方法" class="headerlink" title="GET 方法"></a>GET 方法</h3><ul>
<li>将<strong>请求的编码信息添加在网址后面</strong></li>
<li><strong>网址与编码信息通过”?”号分隔</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.runoob.com/hello?key1=value1&amp;key2=value2</span><br></pre></td></tr></table></figure>

<ul>
<li>GET方法是<strong>浏览器默认传递参数的方法</strong>，</li>
<li><strong>不建议传输一些敏感信息</strong>，如密码等建议不使用GET方法。</li>
<li><strong>传输数据的大小限制</strong>：最大为1024字节</li>
</ul>
<h4 id="GET-方法实例-使用URL"><a href="#GET-方法实例-使用URL" class="headerlink" title="GET 方法实例(使用URL)"></a>GET 方法实例(使用URL)</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//们使用getParameter()方法来获取提交的数据</span></span><br><span class="line"><span class="comment">//通过浏览器访问 http://localhost:8080/testjsp/main.jsp?name=菜鸟教程&amp;url=http://ww.runoob.com 输出结果</span></span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;使用 GET 方法读取数据&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;站点名:&lt;/b&gt;</span><br><span class="line">   &lt;%= request.getParameter(<span class="string">"name"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;网址:&lt;/b&gt;</span><br><span class="line">   &lt;%= request.getParameter(<span class="string">"url"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>



<h4 id="GET-方法实例-使用表单"><a href="#GET-方法实例-使用表单" class="headerlink" title="GET 方法实例(使用表单)"></a>GET 方法实例(使用表单)</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"main.jsp"</span> method=<span class="string">"GET"</span>&gt;</span><br><span class="line">站点名: &lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">网址: &lt;input type=<span class="string">"text"</span> name=<span class="string">"url"</span> /&gt;</span><br><span class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<h3 id="POST-方法"><a href="#POST-方法" class="headerlink" title="POST 方法"></a>POST 方法</h3><ul>
<li><p>POST提交数据是隐式的</p>
<ul>
<li>一些敏感信息，如密码等我们可以通过POST方法传递，。</li>
</ul>
</li>
<li><p>POST提交数据是不可见的，</p>
<ul>
<li>GET是通过在url里面传递的（可以看一下你浏览器的地址栏）。</li>
</ul>
</li>
</ul>
<h4 id="POST-方法实例-使用表单"><a href="#POST-方法实例-使用表单" class="headerlink" title="POST 方法实例(使用表单)"></a>POST 方法实例(使用表单)</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//访问 http://localhost:8080/testjsp/test.html 提交表单数据到 main.jsp 文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//main.jsp</span></span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;使用 POST 方法读取数据&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;站点名:&lt;/b&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="comment">// 解决中文乱码的问题 （转换编码，防止中文乱码的发生）</span></span><br><span class="line">String name = <span class="keyword">new</span> String((request.getParameter(<span class="string">"name"</span>)).getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"UTF-8"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">   &lt;%=name%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;网址:&lt;/b&gt;</span><br><span class="line">   &lt;%= request.getParameter(<span class="string">"url"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test.htm</span></span><br><span class="line">&lt;form action=<span class="string">"main.jsp"</span> method=<span class="string">"POST"</span>&gt;</span><br><span class="line">站点名: &lt;input type=<span class="string">"text"</span> name=<span class="string">"name"</span>&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">网址: &lt;input type=<span class="string">"text"</span> name=<span class="string">"url"</span> /&gt;</span><br><span class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<h3 id="JSP-读取表单数据"><a href="#JSP-读取表单数据" class="headerlink" title="JSP 读取表单数据"></a>JSP 读取表单数据</h3><ul>
<li><strong>getParameter():</strong> 使用 <code>request.getParameter()</code> 方法来<code>获取表单参数的值</code>。</li>
<li><strong>getParameterValues():</strong> 获得如checkbox类（名字相同，但值有多个）的数据。 <code>接收数组变量</code> ，如checkbox类型</li>
<li><strong>getParameterNames():</strong>该方法可以<code>取得所有变量的名称</code>，该方法返回一个 Enumeration。</li>
<li><strong>getInputStream():</strong>调用此方法来<code>读取来自客户端的二进制数据流</code>。</li>
</ul>
<h4 id="示例：传递-Checkbox-数据到JSP程序"><a href="#示例：传递-Checkbox-数据到JSP程序" class="headerlink" title="示例：传递 Checkbox 数据到JSP程序"></a>示例：传递 Checkbox 数据到JSP程序</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//访问 http://localhost:8080/testjsp/test.html 提交表单数据到 main.jsp 文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//test.htm</span></span><br><span class="line">&lt;form action=<span class="string">"main.jsp"</span> method=<span class="string">"POST"</span> target=<span class="string">"_blank"</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"google"</span> checked=<span class="string">"checked"</span> /&gt; Google</span><br><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"runoob"</span>  /&gt; 菜鸟教程</span><br><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"taobao"</span> checked=<span class="string">"checked"</span> /&gt; </span><br><span class="line">                                                淘宝</span><br><span class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"选择网站"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.jsp,用于处理复选框数据</span></span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;从复选框中读取数据&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;Google 是否选中:&lt;/b&gt;</span><br><span class="line">   &lt;%= request.getParameter(<span class="string">"google"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;菜鸟教程是否选中:&lt;/b&gt;</span><br><span class="line">   &lt;%= request.getParameter(<span class="string">"runoob"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;li&gt;&lt;p&gt;&lt;b&gt;淘宝是否选中:&lt;/b&gt;</span><br><span class="line">   &lt;%= request.getParameter(<span class="string">"taobao"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h4 id="示例：读取所有表单参数"><a href="#示例：读取所有表单参数" class="headerlink" title="示例：读取所有表单参数"></a>示例：读取所有表单参数</h4><ul>
<li>使用 <strong>HttpServletRequest</strong> 的 <strong>getParameterNames()</strong> 来读取所有表单参数,<ul>
<li>该方法可以取得所有变量的名称，该方法返回一个枚举。</li>
</ul>
</li>
<li>一旦我们有了一个 Enumeration（枚举），我们就可以调用 hasMoreElements() 方法来确定是否还有元素，以及使用nextElement（）方法来获得每个参数的名称。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.jsp</span></span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;读取所有表单参数&lt;/h1&gt;</span><br><span class="line">&lt;table width=<span class="string">"100%"</span> border=<span class="string">"1"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">&lt;tr bgcolor=<span class="string">"#949494"</span>&gt;</span><br><span class="line">&lt;th&gt;参数名&lt;/th&gt;&lt;th&gt;参数值&lt;/th&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Enumeration paramNames = request.getParameterNames();</span><br><span class="line"></span><br><span class="line">   <span class="keyword">while</span>(paramNames.hasMoreElements()) &#123;</span><br><span class="line">      String paramName = (String)paramNames.nextElement();</span><br><span class="line">      out.print(<span class="string">"&lt;tr&gt;&lt;td&gt;"</span> + paramName + <span class="string">"&lt;/td&gt;\n"</span>);</span><br><span class="line">      String paramValue = request.getParameter(paramName);</span><br><span class="line">      out.println(<span class="string">"&lt;td&gt; "</span> + paramValue + <span class="string">"&lt;/td&gt;&lt;/tr&gt;\n"</span>);</span><br><span class="line">   &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//test.htm</span></span><br><span class="line">&lt;form action=<span class="string">"main.jsp"</span> method=<span class="string">"POST"</span> target=<span class="string">"_blank"</span>&gt;</span><br><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"google"</span> checked=<span class="string">"checked"</span> /&gt; Google</span><br><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"runoob"</span>  /&gt; 菜鸟教程</span><br><span class="line">&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"taobao"</span> checked=<span class="string">"checked"</span> /&gt; </span><br><span class="line">                                                淘宝</span><br><span class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"选择网站"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十二、Filter-过滤器"><a href="#十二、Filter-过滤器" class="headerlink" title="十二、Filter 过滤器"></a>十二、Filter 过滤器</h2><blockquote>
<p>暂时用不到，后面就不继续写了，详情看：<a href="https://www.runoob.com/jsp/jsp-writing-filters.html" target="_blank" rel="noopener">这里</a></p>
</blockquote>
<p><strong>过滤器可以动态地拦截请求和响应，以变换或使用包含在请求或响应中的信息</strong>。</p>
<ul>
<li>JSP 和 Servlet 中的过滤器都是 Java 类</li>
<li>可以将一个或多个过滤器附加到一个 Servlet 或一组 Servlet。</li>
<li>过滤器也可以附加到 JavaServer Pages (JSP) 文件和 HTML 页面。</li>
</ul>
<p><strong>过滤器是可用于 Servlet 编程的 Java 类，可以实现以下目的</strong>：</p>
<ul>
<li>在客户端的请求访问后端资源之前，拦截这些请求。</li>
<li>在服务器的响应发送回客户端之前，处理这些响应。</li>
</ul>
<h3 id="根据规范建议的各种类型的过滤器："><a href="#根据规范建议的各种类型的过滤器：" class="headerlink" title="根据规范建议的各种类型的过滤器："></a>根据规范建议的各种类型的过滤器：</h3><ul>
<li>身份验证过滤器（Authentication Filters）。</li>
<li>数据压缩过滤器（Data compression Filters）。</li>
<li>加密过滤器（Encryption Filters）。</li>
<li>触发资源访问事件过滤器。</li>
<li>图像转换过滤器（Image Conversion Filters）。</li>
<li>日志记录和审核过滤器（Logging and Auditing Filters）。</li>
<li>MIME-TYPE 链过滤器（MIME-TYPE Chain Filters）。</li>
<li>标记化过滤器（Tokenizing Filters）。</li>
<li>XSL/T 过滤器（XSL/T Filters），转换 XML 内容</li>
</ul>
<h3 id="过滤器的过程"><a href="#过滤器的过程" class="headerlink" title="过滤器的过程"></a>过滤器的过程</h3><ol>
<li><p>过滤器通过 Web 部署描述符（web.xml）中的 XML 标签来声明，然后映射到您的应用程序的部署描述符中的 Servlet 名称或 URL 模式。</p>
</li>
<li><p>当 Web 容器启动 Web 应用程序时，它会为您在部署描述符中声明的每一个过滤器创建一个实例。</p>
</li>
<li><p>Filter 的执行顺序与在 web.xml 配置文件中的配置顺序一致，一般把 Filter 配置在所有的 Servlet 之前</p>
</li>
</ol>
<p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://www.runoob.com/wp-content/uploads/2014/01/20161112201612568.png" alt="tp"></p>
<h3 id="Servlet-过滤器方法"><a href="#Servlet-过滤器方法" class="headerlink" title="Servlet 过滤器方法"></a>Servlet 过滤器方法</h3><p>过滤器是一个实现了 javax.servlet.Filter 接口的 Java 类。javax.servlet.Filter 接口定义了三个方法：</p>
<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">方法 &amp; 描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>public void doFilter (ServletRequest, ServletResponse, FilterChain)</strong></td>
<td align="left">该方法完成实际的过滤操作，当客户端的请求与过滤器设置的 URL 匹配时，Servlet 容器将先调用过滤器的 doFilter 方法。FilterChain 用于访问后续过滤器。</td>
</tr>
<tr>
<td align="left"><strong>public void init(FilterConfig filterConfig)</strong></td>
<td align="left">web 应用程序启动时，web 服务器将创建Filter 的实例对象，并调用其init方法，读取web.xml配置，完成对象的初始化功能，从而为后续的用户请求作好拦截的准备工作（filter对象只会创建一次，init方法也只会执行一次）。开发人员通过init方法的参数，可获得代表当前filter配置信息的FilterConfig对象。</td>
</tr>
<tr>
<td align="left"><strong>public void destroy()</strong></td>
<td align="left">Servlet容器在销毁过滤器实例前调用该方法，在该方法中释放Servlet过滤器占用的资源。</td>
</tr>
</tbody></table>
<h2 id="十三、Cookie-处理"><a href="#十三、Cookie-处理" class="headerlink" title="十三、Cookie 处理"></a>十三、Cookie 处理</h2><p><strong>Cookie 是存储在客户机的文本文件，它们保存了大量轨迹信息</strong>。</p>
<ul>
<li>在 Servlet 技术基础上，JSP 显然能够提供对 HTTP cookie 的支持。</li>
</ul>
<p><strong>通常有三个步骤来识别回头客</strong>：</p>
<ul>
<li>服务器脚本发送一系列 cookie 至浏览器。比如名字，年龄，ID 号码等等。</li>
<li>浏览器在本地机中存储这些信息，以备不时之需。</li>
<li>当下一次浏览器发送任何请求至服务器时，它会同时将这些 cookie 信息发送给服务器，然后服务器使用这些信息来识别用户或者干些其它事情。</li>
</ul>
<h3 id="JSP-Cookie-处理需要对中文进行编码与解码"><a href="#JSP-Cookie-处理需要对中文进行编码与解码" class="headerlink" title="JSP Cookie 处理需要对中文进行编码与解码"></a>JSP Cookie 处理需要对中文进行编码与解码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String   str   =   java.net.URLEncoder.encode(<span class="string">"中文"</span>, <span class="string">"UTF-8"</span>);            //编码</span><br><span class="line">String   str   =   java.net.URLDecoder.decode(<span class="string">"编码后的字符串"</span>,<span class="string">"UTF-8"</span>);   // 解码</span><br></pre></td></tr></table></figure>

<h3 id="Cookie-剖析"><a href="#Cookie-剖析" class="headerlink" title="Cookie 剖析"></a>Cookie 剖析</h3><p>Cookie 通常在 HTTP 信息头中设置（虽然 JavaScript 能够直接在浏览器中设置 cookie）</p>
<ul>
<li>JSP 脚本通过 request 对象中的 getCookies() 方法来访问这些 cookie，这个方法会返回一个 Cookie 对象的数组</li>
</ul>
<p>在 JSP 中，设置一个 cookie 需要发送如下的信息头给服务器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Date: Fri, 04 Feb 2015 21:03:38 GMT</span><br><span class="line">Server: Apache/1.3.9 (UNIX) PHP/4.0b3</span><br><span class="line">Set-Cookie: name=runoob; expires=Friday, 04-Feb-17 22:03:38 GMT; </span><br><span class="line">                 path=/; domain=runoob.com</span><br><span class="line">Connection: close</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Set-Cookie 信息头包含一个键值对，</p>
<ul>
<li>一个 GMT（格林尼治标准）时间，一个路径，一个域名。</li>
<li>键值对会被编码为URL。</li>
<li>有效期域是个指令，告诉浏览器在什么时候之后就可以清除这个 cookie</li>
</ul>
</li>
<li><p>如果浏览器被配置成可存储 cookie，那么它将会保存这些信息直到过期。</p>
</li>
<li><p>如果用户访问的任何页面匹配了 cookie 中的路径和域名，那么浏览器将会重新将这个 cookie 发回给服务器</p>
</li>
</ul>
<p>浏览器端的信息头长得就像下面这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET / HTTP/1.0</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">User-Agent: Mozilla/4.6 (X11; I; Linux 2.2.6-15apmac ppc)</span><br><span class="line">Host: zink.demon.co.uk:1126</span><br><span class="line">Accept: image/gif, */*</span><br><span class="line">Accept-Encoding: gzip</span><br><span class="line">Accept-Language: en</span><br><span class="line">Accept-Charset: iso-8859-1,*,utf-8</span><br><span class="line">Cookie: name=xyz</span><br></pre></td></tr></table></figure>

<h3 id="Servlet-Cookie-方法"><a href="#Servlet-Cookie-方法" class="headerlink" title="Servlet Cookie 方法"></a>Servlet Cookie 方法</h3><p>下表列出了 Cookie 对象中常用的方法：</p>
<table>
<thead>
<tr>
<th align="left"><strong>序号</strong></th>
<th align="left"><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public void setDomain(String pattern)</strong>设置 cookie 的域名，比如 runoob.com</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public String getDomain()</strong>获取 cookie 的域名，比如 runoob.com</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public void setMaxAge(int expiry)</strong>设置 cookie 有效期，以秒为单位，默认有效期为当前session的存活时间</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public int getMaxAge()</strong>获取 cookie 有效期，以秒为单位，默认为-1 ，表明cookie会活到浏览器关闭为止</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>public String getName()</strong>返回 cookie 的名称，名称创建后将不能被修改</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>public void setValue(String newValue)</strong>设置 cookie 的值</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>public String getValue()</strong>获取cookie的值</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>public void setPath(String uri)</strong>设置 cookie 的路径，默认为当前页面目录下的所有 URL，还有此目录下的所有子目录</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>public String getPath()</strong>获取 cookie 的路径</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>public void setSecure(boolean flag)</strong>指明 cookie 是否要加密传输</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>public void setComment(String purpose)</strong>设置注释描述 cookie 的目的。当浏览器将 cookie 展现给用户时，注释将会变得非常有用</td>
</tr>
<tr>
<td align="left">12</td>
<td align="left"><strong>public String getComment()</strong>返回描述 cookie 目的的注释，若没有则返回 null</td>
</tr>
</tbody></table>
<h3 id="使用-JSP-设置-cookie的三个步骤"><a href="#使用-JSP-设置-cookie的三个步骤" class="headerlink" title="使用 JSP 设置 cookie的三个步骤"></a>使用 JSP 设置 cookie的三个步骤</h3><ol>
<li><p><strong>创建一个 cookie 对象</strong>：</p>
<ul>
<li>调用 cookie 的构造函数，使用一个 cookie 名称和值做参数，它们都是字符串。</li>
<li><code>Cookie cookie = new Cookie(&quot;key&quot;,&quot;value&quot;);</code></li>
<li>请务必牢记，名称和值中都不能包含空格或者如下的字符：<ul>
<li><code>[ ] ( ) = , &quot; / ? @ : ;</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>设置有效期</strong>：</p>
<ul>
<li>调用 setMaxAge() 函数表明 cookie 在多长时间（以秒为单位）内有效。</li>
<li>下面的操作将有效期设为了 24 小时。<ul>
<li><code>cookie.setMaxAge(60*60*24);</code> </li>
</ul>
</li>
</ul>
</li>
<li><p><strong>将 cookie 发送至 HTTP 响应头中</strong>：</p>
<ul>
<li>调用 response.addCookie() 函数来向 HTTP 响应头中添加 cookie。</li>
<li><code>response.addCookie(cookie);</code></li>
</ul>
</li>
</ol>
<h3 id="读取-Cookie"><a href="#读取-Cookie" class="headerlink" title="读取 Cookie"></a>读取 Cookie</h3><ol>
<li>调用 <code>request.getCookies()</code> 方法来获得一个 <code>javax.servlet.http.Cookie</code> 对象的数组，</li>
<li>然后遍历这个数组，</li>
<li>使用 <code>getName() 方法和 getValue() 方法</code>来获取每一个 cookie 的名称和值。</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.net.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">   Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">   <span class="comment">// 获取 cookies 的数据,是一个数组</span></span><br><span class="line">   cookies = request.getCookies();</span><br><span class="line">   <span class="keyword">if</span>( cookies != <span class="keyword">null</span> )&#123;</span><br><span class="line">      out.println(<span class="string">"&lt;h2&gt; 查找 Cookie 名与值&lt;/h2&gt;"</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++)&#123;</span><br><span class="line">         cookie = cookies[i];</span><br><span class="line">        </span><br><span class="line">         out.print(<span class="string">"参数名 : "</span> + cookie.getName());</span><br><span class="line">         out.print(<span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">         out.print(<span class="string">"参数值: "</span> + URLDecoder.decode(cookie.getValue(), <span class="string">"utf-8"</span>) +<span class="string">" &lt;br&gt;"</span>);</span><br><span class="line">         out.print(<span class="string">"------------------------------------&lt;br&gt;"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      out.println(<span class="string">"&lt;h2&gt;没有发现 Cookie&lt;/h2&gt;"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="删除-cookie"><a href="#删除-cookie" class="headerlink" title="删除 cookie"></a>删除 cookie</h3><p>步骤：</p>
<ul>
<li>获取一个已经存在的 cookie 然后存储在 Cookie 对象中。</li>
<li>将 cookie 的有效期设置为 0。</li>
<li>将这个 cookie 重新添加进响应头中。</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.net.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Cookie cookie = <span class="keyword">null</span>;</span><br><span class="line">   Cookie[] cookies = <span class="keyword">null</span>;</span><br><span class="line">   <span class="comment">// 获取当前域名下的cookies，是一个数组</span></span><br><span class="line">   cookies = request.getCookies();</span><br><span class="line">   <span class="keyword">if</span>( cookies != <span class="keyword">null</span> )&#123;</span><br><span class="line">      out.println(<span class="string">"&lt;h2&gt; 查找 Cookie 名与值&lt;/h2&gt;"</span>);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cookies.length; i++)&#123;</span><br><span class="line">         cookie = cookies[i];</span><br><span class="line">         <span class="keyword">if</span>((cookie.getName( )).compareTo(<span class="string">"name"</span>) == <span class="number">0</span> )&#123;</span><br><span class="line">            cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">            response.addCookie(cookie);</span><br><span class="line">            out.print(<span class="string">"删除 Cookie: "</span> + </span><br><span class="line">            cookie.getName( ) + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         out.print(<span class="string">"参数名 : "</span> + cookie.getName());</span><br><span class="line">         out.print(<span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">         out.print(<span class="string">"参数值: "</span> + URLDecoder.decode(cookie.getValue(), <span class="string">"utf-8"</span>) +<span class="string">" &lt;br&gt;"</span>);</span><br><span class="line">         out.print(<span class="string">"------------------------------------&lt;br&gt;"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      out.println(<span class="string">"&lt;h2&gt;没有发现 Cookie&lt;/h2&gt;"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十四、-Session-会话"><a href="#十四、-Session-会话" class="headerlink" title="十四、 Session 会话"></a>十四、 Session 会话</h2><p>HTTP是无状态协议，这意味着每次客户端检索网页时，都要单独打开一个服务器连接，因此服务器不会记录下先前客户端请求的任何信息。</p>
<p><strong>有几种方法来维持客户端与服务器的会话</strong></p>
<h3 id="Cookies（不推荐）"><a href="#Cookies（不推荐）" class="headerlink" title="Cookies（不推荐）"></a>Cookies（不推荐）</h3><p><strong>网络服务器可以指定一个唯一的session ID作为cookie来代表每个客户端，用来识别这个客户端接下来的请求。</strong></p>
<blockquote>
<p>这可能不是一种有效的方式，因为很多时候浏览器并不一定支持cookie，</p>
<p>所以我们不建议使用这种方法来维持会话</p>
</blockquote>
<h3 id="隐藏表单域（不推荐）"><a href="#隐藏表单域（不推荐）" class="headerlink" title="隐藏表单域（不推荐）"></a>隐藏表单域（不推荐）</h3><p><strong>一个网络服务器可以发送一个隐藏的HTML表单域和一个唯一的session ID</strong></p>
<ul>
<li><p>比如：<code>&lt;input type=&quot;hidden&quot; name=&quot;sessionid&quot; value=&quot;12345&quot;&gt;</code></p>
</li>
<li><p>这个条目意味着，</p>
<ul>
<li>当表单被提交时，指定的名称和值将会自动包含在GET或POST数据中。</li>
<li>每当浏览器发送一个请求，session_id的值就可以用来保存不同浏览器的轨迹</li>
</ul>
</li>
</ul>
<blockquote>
<p>这种方式可能是一种有效的方式，但点击<A HREF>标签中的超链接时不会产生表单提交事件，因此隐藏表单域也不支持通用会话跟踪。</p>
</blockquote>
<h3 id="重写URL-好，但麻烦"><a href="#重写URL-好，但麻烦" class="headerlink" title="重写URL(好，但麻烦)"></a>重写URL(好，但麻烦)</h3><p><strong>在每个URL后面添加一些额外的数据来区分会话，服务器能够根据这些数据来关联session标识符。</strong></p>
<p>举例来说，<code>http://w3cschool.cc/file.htm;sessionid=12345</code>，</p>
<ul>
<li>session标识符为sessionid=12345，服务器可以用这个数据来识别客户端。</li>
</ul>
<blockquote>
<p>相比而言，重写URL是更好的方式来，就算浏览器不支持cookies也能工作，</p>
<p>但<code>缺点</code>是您必须为每个URL动态指定session ID，就算这是个简单的HTML页面。</p>
</blockquote>
<h3 id="session对象-1"><a href="#session对象-1" class="headerlink" title="session对象"></a>session对象</h3><p><strong>JSP利用servlet提供的HttpSession接口来识别一个用户，存储这个用户的所有访问信息。</strong></p>
<p>默认情况下，JSP允许会话跟踪，一个新的HttpSession对象将会自动地为新的客户端实例化。</p>
<ul>
<li><p>禁止会话跟踪需要显式地关掉它，通过将page指令中session属性值设为false来实现，</p>
<ul>
<li>就像下面这样：<code>&lt;%@ page session=&quot;false&quot; %&gt;</code></li>
</ul>
</li>
<li><p>JSP引擎将隐含的session对象暴露给开发者。由于提供了session对象，开发者就可以方便地存储或检索数据。</p>
</li>
</ul>
<p>session对象的一些重要方法：</p>
<table>
<thead>
<tr>
<th align="left"><strong>S.N.</strong></th>
<th align="left"><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>public Object getAttribute(String name)</strong><br>返回session对象中与指定名称绑定的对象，如果不存在则返回null</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>public Enumeration getAttributeNames()</strong><br/>返回session对象中所有的对象名称</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>public long getCreationTime()<br/></strong>返回session对象被创建的时间， 以毫秒为单位，从1970年1月1号凌晨开始算起</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>public String getId()</strong><br/>返回session对象的ID</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>public long getLastAccessedTime()<br/></strong>返回客户端最后访问的时间，以毫秒为单位，从1970年1月1号凌晨开始算起</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>public int getMaxInactiveInterval()<br/></strong>返回最大时间间隔，以秒为单位，servlet 容器将会在这段时间内保持会话打开</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>public void invalidate()</strong><br/>将session无效化，解绑任何与该session绑定的对象</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>public boolean isNew()<br/></strong>返回是否为一个新的客户端，或者客户端是否拒绝加入session</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>public void removeAttribute(String name)<br/></strong>移除session中指定名称的对象</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>public void setAttribute(String name, Object value)</strong> <br/>使用指定的名称和值来产生一个对象并绑定到session中</td>
</tr>
<tr>
<td align="left">11</td>
<td align="left"><strong>public void setMaxInactiveInterval(int interval)</strong><br/>用来指定时间，以秒为单位，servlet容器将会在这段时间内保持会话有效</td>
</tr>
</tbody></table>
<h4 id="Session应用-示例"><a href="#Session应用-示例" class="headerlink" title="Session应用(示例)"></a>Session应用(示例)</h4><p>使用HttpSession对象来获取创建时间和最后一次访问时间,为request对象关联一个新的session对象，如果这个对象尚未存在的话。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 获取session创建时间</span></span><br><span class="line">   Date createTime = <span class="keyword">new</span> Date(session.getCreationTime());</span><br><span class="line">   <span class="comment">// 获取最后访问页面的时间</span></span><br><span class="line">   Date lastAccessTime = <span class="keyword">new</span> Date(session.getLastAccessedTime());</span><br><span class="line"></span><br><span class="line">   String title = <span class="string">"再次访问菜鸟教程实例"</span>;</span><br><span class="line">   Integer visitCount = <span class="keyword">new</span> Integer(<span class="number">0</span>);</span><br><span class="line">   String visitCountKey = <span class="keyword">new</span> String(<span class="string">"visitCount"</span>);</span><br><span class="line">   String userIDKey = <span class="keyword">new</span> String(<span class="string">"userID"</span>);</span><br><span class="line">   String userID = <span class="keyword">new</span> String(<span class="string">"ABCD"</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 检测网页是否有新的访问用户</span></span><br><span class="line">   <span class="keyword">if</span> (session.isNew())&#123;</span><br><span class="line">      title = <span class="string">"访问菜鸟教程实例"</span>;</span><br><span class="line">      session.setAttribute(userIDKey, userID);</span><br><span class="line">      session.setAttribute(visitCountKey,  visitCount);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       visitCount = (Integer)session.getAttribute(visitCountKey);</span><br><span class="line">       visitCount += <span class="number">1</span>;</span><br><span class="line">       userID = (String)session.getAttribute(userIDKey);</span><br><span class="line">       session.setAttribute(visitCountKey,  visitCount);</span><br><span class="line">   &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Session 跟踪&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;Session 跟踪&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;table border=<span class="string">"1"</span> align=<span class="string">"center"</span>&gt; </span><br><span class="line">&lt;tr bgcolor=<span class="string">"#949494"</span>&gt;</span><br><span class="line">   &lt;th&gt;Session 信息&lt;/th&gt;</span><br><span class="line">   &lt;th&gt;值&lt;/th&gt;</span><br><span class="line">&lt;/tr&gt; </span><br><span class="line">&lt;tr&gt;</span><br><span class="line">   &lt;td&gt;id&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&lt;% out.print( session.getId()); %&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt; </span><br><span class="line">&lt;tr&gt;</span><br><span class="line">   &lt;td&gt;创建时间&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&lt;% out.print(createTime); %&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt; </span><br><span class="line">&lt;tr&gt;</span><br><span class="line">   &lt;td&gt;最后访问时间&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&lt;% out.print(lastAccessTime); %&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt; </span><br><span class="line">&lt;tr&gt;</span><br><span class="line">   &lt;td&gt;用户 ID&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&lt;% out.print(userID); %&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt; </span><br><span class="line">&lt;tr&gt;</span><br><span class="line">   &lt;td&gt;访问次数&lt;/td&gt;</span><br><span class="line">   &lt;td&gt;&lt;% out.print(visitCount); %&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt; </span><br><span class="line">&lt;/table&gt; </span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="删除Session数据"><a href="#删除Session数据" class="headerlink" title="删除Session数据"></a>删除Session数据</h3><p>当处理完一个用户的会话数据后，您可以有如下选择：</p>
<ul>
<li><p><strong>移除一个特定的属性</strong>：</p>
<p>调用public void removeAttribute(String name) 方法来移除指定的属性。</p>
</li>
<li><p><strong>删除整个会话</strong>：</p>
<p>调用public void invalidate() 方法来使整个session无效。</p>
</li>
<li><p><strong>设置会话有效期</strong>：</p>
<p>调用 public void setMaxInactiveInterval(int interval) 方法来设置session超时。</p>
</li>
<li><p><strong>登出用户</strong>：</p>
<p>支持servlet2.4版本的服务器，可以调用 logout()方法来登出用户，并且使所有相关的session无效。</p>
</li>
<li><p>配置<strong>web.xml</strong>文件：</p>
<p>如果使用的是Tomcat，可以向下面这样配置web.xml文件：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;session-config&gt;</span><br><span class="line">  &lt;session-timeout&gt;15&lt;&#x2F;session-timeout&gt;</span><br><span class="line">&lt;&#x2F;session-config&gt;</span><br></pre></td></tr></table></figure>

<pre><code>- 超时以分钟为单位，Tomcat中的默认的超时时间是30分钟。</code></pre><ul>
<li>Servlet中的getMaxInactiveInterval( ) 方法以秒为单位返回超时时间。如果在web.xml中配置的是15分钟，则getMaxInactiveInterval( ) 方法将会返回900。</li>
</ul>
<h2 id="十五、文件上传（示例）"><a href="#十五、文件上传（示例）" class="headerlink" title="十五、文件上传（示例）"></a>十五、文件上传（示例）</h2><p><strong>JSP 可以与 HTML form 标签一起使用，来允许用户上传文件到服务器</strong>。</p>
<p>上传的文件可以是文本文件或图像文件或任何文档</p>
<h3 id="使用到的文件有："><a href="#使用到的文件有：" class="headerlink" title="使用到的文件有："></a>使用到的文件有：</h3><ul>
<li>upload.jsp : 文件上传表单。</li>
<li>message.jsp : 上传成功后跳转页面。</li>
<li>UploadServlet.java : 上传处理 Servlet。</li>
<li>需要引入的 jar 文件：commons-fileupload-1.3.2、commons-io-2.5.jar。</li>
</ul>
<h3 id="创建一个文件上传表单"><a href="#创建一个文件上传表单" class="headerlink" title="创建一个文件上传表单"></a>创建一个文件上传表单</h3><ul>
<li>表单 <strong>method</strong> 属性应该设置为 <strong>POST</strong> 方法，不能使用 GET 方法。</li>
<li>表单 <strong>enctype</strong> 属性应该设置为 <strong>multipart/form-data</strong>.</li>
<li>表单 <strong>action</strong> 属性应该设置为在后端服务器上处理文件上传的 Servlet 文件。下面的实例使用了 <strong>UploadServlet</strong> Servlet 来上传文件。</li>
<li>上传单个文件，您应该使用<code>单个带有属性 type=&quot;file&quot; 的 &lt;input .../&gt; 标签</code>。<ul>
<li>为了允许多个文件上传，请包含多个 name 属性值不同的 input 标签。输入标签具有不同的名称属性的值。浏览器会为每个 input 标签关联一个浏览按钮。</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//upload.jsp</span></span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span></span><br><span class="line">    <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;文件上传实例 - 菜鸟教程&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;文件上传实例 - 菜鸟教程&lt;/h1&gt;</span><br><span class="line">&lt;form method=<span class="string">"post"</span> action=<span class="string">"/TomcatTest/UploadServlet"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;</span><br><span class="line">    选择一个文件:</span><br><span class="line">    &lt;input type=<span class="string">"file"</span> name=<span class="string">"uploadFile"</span> /&gt;</span><br><span class="line">    &lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"上传"</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="编写后台-Servlet"><a href="#编写后台-Servlet" class="headerlink" title="编写后台 Servlet"></a>编写后台 Servlet</h3><p>同于处理文件上传，在这之前我们先确保依赖包已经引入到项目的 WEB-INF/lib 目录下：</p>
<ul>
<li>下面的实例依赖于 FileUpload，所以一定要确保在您的 classpath 中有最新版本的 <strong>commons-fileupload.x.x.jar</strong> 文件。可以从 http://commons.apache.org/proper/commons-fileupload/ 下载。</li>
<li>FileUpload 依赖于 Commons IO，所以一定要确保在您的 classpath 中有最新版本的 <strong>commons-io-x.x.jar</strong> 文件。可以从 http://commons.apache.org/proper/commons-io/ 下载。</li>
</ul>
<p>你可以直接”菜鸟教程”提供的两个依赖包：(添加到 <strong>WEB-INF</strong> 下 <strong>lib</strong> 目录里面，并添加到 <strong>build path</strong>，否则会报错)</p>
<ul>
<li><a href="http://static.runoob.com/download/commons-fileupload-1.3.2.jar" target="_blank" rel="noopener">commons-fileupload-1.3.2.jar</a></li>
<li><a href="http://static.runoob.com/download/commons-io-2.5.jar" target="_blank" rel="noopener">commons-io-2.5.jar</a></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//UploadServlet</span></span><br><span class="line"><span class="keyword">package</span> com.runoob.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Servlet implementation class UploadServlet</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/UploadServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// 上传文件存储目录</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String UPLOAD_DIRECTORY = <span class="string">"upload"</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 上传配置</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MEMORY_THRESHOLD   = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">3</span>;  <span class="comment">// 3MB</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_FILE_SIZE      = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">40</span>; <span class="comment">// 40MB</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_REQUEST_SIZE   = <span class="number">1024</span> * <span class="number">1024</span> * <span class="number">50</span>; <span class="comment">// 50MB</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传数据及保存文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">        HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 检测是否为多媒体上传</span></span><br><span class="line">        <span class="keyword">if</span> (!ServletFileUpload.isMultipartContent(request)) &#123;</span><br><span class="line">            <span class="comment">// 如果不是则停止</span></span><br><span class="line">            PrintWriter writer = response.getWriter();</span><br><span class="line">            writer.println(<span class="string">"Error: 表单必须包含 enctype=multipart/form-data"</span>);</span><br><span class="line">            writer.flush();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// 配置上传参数</span></span><br><span class="line">        DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();</span><br><span class="line">        <span class="comment">// 设置内存临界值 - 超过后将产生临时文件并存储于临时目录中</span></span><br><span class="line">        factory.setSizeThreshold(MEMORY_THRESHOLD);</span><br><span class="line">        <span class="comment">// 设置临时存储目录</span></span><br><span class="line">        factory.setRepository(<span class="keyword">new</span> File(System.getProperty(<span class="string">"java.io.tmpdir"</span>)));</span><br><span class="line"> </span><br><span class="line">        ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory);</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// 设置最大文件上传值</span></span><br><span class="line">        upload.setFileSizeMax(MAX_FILE_SIZE);</span><br><span class="line">         </span><br><span class="line">        <span class="comment">// 设置最大请求值 (包含文件和表单数据)</span></span><br><span class="line">        upload.setSizeMax(MAX_REQUEST_SIZE);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 中文处理</span></span><br><span class="line">        upload.setHeaderEncoding(<span class="string">"UTF-8"</span>); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 构造临时路径来存储上传的文件</span></span><br><span class="line">        <span class="comment">// 这个路径相对当前应用的目录</span></span><br><span class="line">        String uploadPath = getServletContext().getRealPath(<span class="string">"/"</span>) + File.separator + UPLOAD_DIRECTORY;</span><br><span class="line">       </span><br><span class="line">         </span><br><span class="line">        <span class="comment">// 如果目录不存在则创建</span></span><br><span class="line">        File uploadDir = <span class="keyword">new</span> File(uploadPath);</span><br><span class="line">        <span class="keyword">if</span> (!uploadDir.exists()) &#123;</span><br><span class="line">            uploadDir.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 解析请求的内容提取文件数据</span></span><br><span class="line">            <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">            List&lt;FileItem&gt; formItems = upload.parseRequest(request);</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span> (formItems != <span class="keyword">null</span> &amp;&amp; formItems.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 迭代表单数据</span></span><br><span class="line">                <span class="keyword">for</span> (FileItem item : formItems) &#123;</span><br><span class="line">                    <span class="comment">// 处理不在表单中的字段</span></span><br><span class="line">                    <span class="keyword">if</span> (!item.isFormField()) &#123;</span><br><span class="line">                        String fileName = <span class="keyword">new</span> File(item.getName()).getName();</span><br><span class="line">                        String filePath = uploadPath + File.separator + fileName;</span><br><span class="line">                        File storeFile = <span class="keyword">new</span> File(filePath);</span><br><span class="line">                        <span class="comment">// 在控制台输出文件的上传路径</span></span><br><span class="line">                        System.out.println(filePath);</span><br><span class="line">                        <span class="comment">// 保存文件到硬盘</span></span><br><span class="line">                        item.write(storeFile);</span><br><span class="line">                        request.setAttribute(<span class="string">"message"</span>,</span><br><span class="line">                            <span class="string">"文件上传成功!"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            request.setAttribute(<span class="string">"message"</span>,</span><br><span class="line">                    <span class="string">"错误信息: "</span> + ex.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 跳转到 message.jsp</span></span><br><span class="line">        getServletContext().getRequestDispatcher(<span class="string">"/message.jsp"</span>).forward(</span><br><span class="line">                request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="上传成功后跳转页面"><a href="#上传成功后跳转页面" class="headerlink" title="上传成功后跳转页面"></a>上传成功后跳转页面</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//message.jsp 文件代码如下：</span></span><br><span class="line"></span><br><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span></span><br><span class="line">    <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;文件上传结果&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;center&gt;</span><br><span class="line">        &lt;h2&gt;$&#123;message&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="编译和运行-Servlet"><a href="#编译和运行-Servlet" class="headerlink" title="编译和运行 Servlet"></a>编译和运行 Servlet</h3><p>编译上面的 Servlet UploadServlet，并在 web.xml 文件中创建所需的条目，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:web</span>=<span class="string">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"2.5"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.runoob.test.UploadServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UploadServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/TomcatTest/UploadServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="十六、日期处理-（JAVA）"><a href="#十六、日期处理-（JAVA）" class="headerlink" title="十六、日期处理 （JAVA）"></a>十六、日期处理 （JAVA）</h2><p>Java中的Date类，它在java.util包下，封装了当前日期和时间。</p>
<ul>
<li>Date类有两个构造函数<ul>
<li>第一个构造函数使用当前日期和时间来初始化对象。 <ul>
<li><code>Date( )</code></li>
</ul>
</li>
<li>第二个构造函数接受一个参数，这个参数表示从1970年1月1日凌晨至所要表示时间的毫秒数<ul>
<li><code>Date(long millisec)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>获取Date对象后，您就能够使用下表列出的所有方法：</p>
<table>
<thead>
<tr>
<th align="left"><strong>序号</strong></th>
<th align="left"><strong>方法</strong> <strong>&amp;</strong> <strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left"><strong>boolean after(Date date)</strong>如果比给定的日期晚，则返回true，否则返回false</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left"><strong>boolean before(Date date)</strong>如果比给定的日期早，则返回true，否则返回false</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"><strong>Object clone( )</strong>获取当前对象的一个副本</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"><strong>int compareTo(Date date)</strong>如果与给定日期相等，则返回0，如果比给定日期早，则返回一个负数，如果比给定日期晚，则返回一个正数</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left"><strong>int compareTo(Object obj)</strong>与 compareTo(Date) 方法相同，如果 obj 不是Date类或其子类的对象，抛出ClassCastException异常</td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"><strong>boolean equals(Object date)</strong>如果与给定日期相同，则返回true，否则返回false</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"><strong>long getTime( )</strong>返回从1970年1月1日凌晨至此对象所表示时间的毫秒数</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"><strong>int hashCode( )</strong>返回此对象的哈希码</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"><strong>void setTime(long time)</strong>使用给定参数设置时间和日期，参数time表示从1970年1月1日凌晨至time所经过的毫秒数</td>
</tr>
<tr>
<td align="left">10</td>
<td align="left"><strong>String toString( )</strong>将此对象转换为字符串并返回这个字符串</td>
</tr>
</tbody></table>
<h3 id="获取当前日期和时间"><a href="#获取当前日期和时间" class="headerlink" title="获取当前日期和时间"></a>获取当前日期和时间</h3><p>使用Date对象的toString()方法</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*, javax.servlet.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;显示当前时间与日期&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Date date = <span class="keyword">new</span> Date();</span><br><span class="line">   out.print( <span class="string">"&lt;h2 align=\"center\"&gt;"</span> +date.toString()+<span class="string">"&lt;/h2&gt;"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h3 id="日期比较"><a href="#日期比较" class="headerlink" title="日期比较"></a>日期比较</h3><ul>
<li>使用<code>getTime()方法</code>得到毫秒数，然后比较毫秒数就行了。</li>
<li>使用<code>before()，after()，equals()方法</code>。<ul>
<li>比如，new Date(99,2,12).before(new Date(99,2,18))返回true。</li>
</ul>
</li>
<li>使用<code>compareTo()方法</code>，这个方法在Comparable接口中定义，在Date中实现。</li>
</ul>
<h3 id="格式化日期"><a href="#格式化日期" class="headerlink" title="格式化日期"></a>格式化日期</h3><p>使用SimpleDateFormat格式化日期</p>
<ul>
<li>SimpleDateFormat使用一种地区敏感的方式来格式化和解析日期，它允许您使用自定义的模式来格式化日期和时间</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"javax.servlet.*,java.text.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;显示当前时间与日期&lt;/h1&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   Date dNow = <span class="keyword">new</span> Date( );</span><br><span class="line">   SimpleDateFormat ft = </span><br><span class="line">   <span class="keyword">new</span> SimpleDateFormat (<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">   out.print( <span class="string">"&lt;h2 align=\"center\"&gt;"</span> + ft.format(dNow) + <span class="string">"&lt;/h2&gt;"</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h4 id="SimpleDateFormat格式码"><a href="#SimpleDateFormat格式码" class="headerlink" title="SimpleDateFormat格式码"></a>SimpleDateFormat格式码</h4><table>
<thead>
<tr>
<th align="left"><strong>字符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>示例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">G</td>
<td align="left">时代标识符</td>
<td align="left">AD</td>
</tr>
<tr>
<td align="left">y</td>
<td align="left">4位数年份</td>
<td align="left">2001</td>
</tr>
<tr>
<td align="left">M</td>
<td align="left">月</td>
<td align="left">July or 07</td>
</tr>
<tr>
<td align="left">d</td>
<td align="left">日</td>
<td align="left">10</td>
</tr>
<tr>
<td align="left">h</td>
<td align="left">12小时制， A.M./P.M. (1~12)</td>
<td align="left">12</td>
</tr>
<tr>
<td align="left">H</td>
<td align="left">24小时制</td>
<td align="left">22</td>
</tr>
<tr>
<td align="left">m</td>
<td align="left">分钟</td>
<td align="left">30</td>
</tr>
<tr>
<td align="left">s</td>
<td align="left">秒</td>
<td align="left">55</td>
</tr>
<tr>
<td align="left">S</td>
<td align="left">毫秒</td>
<td align="left">234</td>
</tr>
<tr>
<td align="left">E</td>
<td align="left">星期</td>
<td align="left">Tuesday</td>
</tr>
<tr>
<td align="left">D</td>
<td align="left">一年中的某天</td>
<td align="left">360</td>
</tr>
<tr>
<td align="left">F</td>
<td align="left">一个月中某星期的某天</td>
<td align="left">2 (second Wed. in July)</td>
</tr>
<tr>
<td align="left">w</td>
<td align="left">一年中的某星期</td>
<td align="left">40</td>
</tr>
<tr>
<td align="left">W</td>
<td align="left">一个月中的某星期</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">a</td>
<td align="left">A.M./P.M. 标记</td>
<td align="left">PM</td>
</tr>
<tr>
<td align="left">k</td>
<td align="left">一天中的某个小时 (1~24)</td>
<td align="left">24</td>
</tr>
<tr>
<td align="left">K</td>
<td align="left">一天中的某个小时，A.M./P.M. (0~11)</td>
<td align="left">10</td>
</tr>
<tr>
<td align="left">z</td>
<td align="left">时区</td>
<td align="left">Eastern Standard Time</td>
</tr>
<tr>
<td align="left">‘</td>
<td align="left">文本分隔</td>
<td align="left">Delimiter</td>
</tr>
<tr>
<td align="left">“</td>
<td align="left">单引号</td>
<td align="left">`</td>
</tr>
</tbody></table>
<h2 id="十七、页面重定向"><a href="#十七、页面重定向" class="headerlink" title="十七、页面重定向"></a>十七、页面重定向</h2><p><strong>当需要将文档移动到一个新的位置时，就需要使用JSP重定向了。</strong></p>
<ul>
<li><p>最简单的重定向方式：使用<code>response对象的sendRedirect()方法</code>。</p>
<ul>
<li>这个方法将状态码和新的页面位置作为响应发回给浏览器</li>
<li>这个方法的签名如下：</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> response.sendRedirect(String location)</span><br><span class="line"><span class="keyword">throws</span> IOException</span><br></pre></td></tr></table></figure>
</li>
<li><p>也可以使用setStatus()和setHeader()方法：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">String site = <span class="string">"http://www.runoob.com"</span> ;</span><br><span class="line">response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">response.setHeader(<span class="string">"Location"</span>, site); </span><br><span class="line">....</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 重定向到新地址</span></span><br><span class="line">   String site = <span class="keyword">new</span> String(<span class="string">"http://www.runoob.com"</span>);</span><br><span class="line">   response.setStatus(response.SC_MOVED_TEMPORARILY);</span><br><span class="line">   response.setHeader(<span class="string">"Location"</span>, site); </span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>



<h2 id="十八、自动刷新"><a href="#十八、自动刷新" class="headerlink" title="十八、自动刷新"></a>十八、自动刷新</h2><blockquote>
<p>想象一下，如果要直播比赛的比分，或股票市场的实时状态，或当前的外汇配给，该怎么实现呢？</p>
<p>要实现这种实时功能，您就不得不规律性地刷新页面。</p>
</blockquote>
<p><strong>JSP提供了一种机制来使这种工作变得简单，它能够定时地自动刷新页面</strong></p>
<ul>
<li>刷新一个页面最简单的方式：<code>使用response对象的setIntHeader()方法</code><ul>
<li>这个方法通知浏览器在给定的时间后刷新，时间以秒为单位</li>
<li><code>public void setIntHeader(String header, int headerValue)</code></li>
</ul>
</li>
</ul>
<h3 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.io.*,java.util.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;自动刷新实&lt;/h2&gt;</span><br><span class="line">&lt;%</span><br><span class="line">   <span class="comment">// 设置每隔5秒刷新一次</span></span><br><span class="line">   response.setIntHeader(<span class="string">"Refresh"</span>, <span class="number">5</span>);</span><br><span class="line">   <span class="comment">// 获取当前时间</span></span><br><span class="line">   Calendar calendar = <span class="keyword">new</span> GregorianCalendar();</span><br><span class="line">   String am_pm;</span><br><span class="line">   <span class="keyword">int</span> hour = calendar.get(Calendar.HOUR);</span><br><span class="line">   <span class="keyword">int</span> minute = calendar.get(Calendar.MINUTE);</span><br><span class="line">   <span class="keyword">int</span> second = calendar.get(Calendar.SECOND);</span><br><span class="line">   <span class="keyword">if</span>(calendar.get(Calendar.AM_PM) == <span class="number">0</span>)</span><br><span class="line">      am_pm = <span class="string">"AM"</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      am_pm = <span class="string">"PM"</span>;</span><br><span class="line">   String CT = hour+<span class="string">":"</span>+ minute +<span class="string">":"</span>+ second +<span class="string">" "</span>+ am_pm;</span><br><span class="line">   out.println(<span class="string">"当前时间为: "</span> + CT + <span class="string">"\n"</span>);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十九、JSP-标准标签库（JSTL）"><a href="#十九、JSP-标准标签库（JSTL）" class="headerlink" title="十九、JSP 标准标签库（JSTL）"></a>十九、JSP 标准标签库（JSTL）</h2><p>JSP标准标签库（JSTL）是一个JSP标签集合，它封装了JSP应用的通用核心功能。</p>
<p>JSTL支持通用的、结构化的任务，比如迭代，条件判断，XML文档操作，国际化标签，SQL标签。 除了这些，它还提供了一个框架来使用集成JSTL的自定义标签。</p>
<p>根据JSTL标签所提供的功能，可以将其分为5个类别。</p>
<ul>
<li><strong>核心标签</strong></li>
<li><strong>格式化标签</strong></li>
<li><strong>SQL 标签</strong></li>
<li><strong>XML 标签</strong></li>
<li><strong>JSTL 函数</strong></li>
</ul>
<blockquote>
<p>详情：<a href="https://www.runoob.com/jsp/jsp-jstl.html" target="_blank" rel="noopener">JSP 标准标签库（JSTL）</a></p>
</blockquote>
<h2 id="二十、连接数据库"><a href="#二十、连接数据库" class="headerlink" title="二十、连接数据库"></a>二十、连接数据库</h2><p>详见：<a href="https://www.runoob.com/jsp/jsp-database-access.html" target="_blank" rel="noopener">JSP 连接数据库</a></p>
<h2 id="二十一、XML-数据处理"><a href="#二十一、XML-数据处理" class="headerlink" title="二十一、XML 数据处理"></a>二十一、XML 数据处理</h2><p><strong>当通过HTTP发送XML数据时，就有必要使用JSP来处理传入和流出的XML文档了</strong>，</p>
<ul>
<li>比如RSS文档。作为一个XML文档，它仅仅只是一堆文本而已，使用JSP创建XML文档并不比创建一个HTML文档难</li>
</ul>
<h3 id="使用JSP发送XML"><a href="#使用JSP发送XML" class="headerlink" title="使用JSP发送XML"></a>使用JSP发送XML</h3><p>使用JSP发送XML内容就和发送HTML内容一样。</p>
<ul>
<li>唯一的不同就是您需要把页面的context属性设置为text/xml。</li>
<li>要设置context属性，使用<code>&lt;%@page % &gt;</code>命令，<ul>
<li>就像这样：<code>&lt;%@ page contentType=&quot;text/xml&quot; %&gt;</code></li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/xml"</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;books&gt;</span><br><span class="line">   &lt;book&gt;</span><br><span class="line">      &lt;name&gt;Padam History&lt;/name&gt;</span><br><span class="line">      &lt;author&gt;ZARA&lt;/author&gt;</span><br><span class="line">      &lt;price&gt;100&lt;/price&gt;</span><br><span class="line">   &lt;/book&gt;</span><br><span class="line">&lt;/books&gt;</span><br></pre></td></tr></table></figure>

<h3 id="处理XML与格式化XML"><a href="#处理XML与格式化XML" class="headerlink" title="处理XML与格式化XML"></a>处理XML与格式化XML</h3><p>在使用JSP处理XML之前，您需要将与XML 和XPath相关的两个库文件放在<code>&lt;Tomcat的安装目录&gt;\lib</code>目录下（你的Web服务器）</p>
<ul>
<li>XercesImpl.jar：<a href="http://www.apache.org/dist/xerces/j/" target="_blank" rel="noopener">在这下载</a></li>
<li>xalan.jar：<a href="http://archive.apache.org/dist/xml/xalan-j/" target="_blank" rel="noopener">在这下载</a></li>
</ul>
<blockquote>
<p>详细示例，查看：<a href="https://www.runoob.com/jsp/jsp-xml-data.html" target="_blank" rel="noopener">菜鸟教程</a></p>
</blockquote>
<h2 id="二十二、JSP-JavaBean"><a href="#二十二、JSP-JavaBean" class="headerlink" title="二十二、JSP JavaBean"></a>二十二、JSP JavaBean</h2><p>详情查看：<a href="https://www.runoob.com/jsp/jsp-javabean.html" target="_blank" rel="noopener">菜鸟教程 - JSP JavaBean</a></p>
<h2 id="二十三、JSP-自定义标签"><a href="#二十三、JSP-自定义标签" class="headerlink" title="二十三、JSP 自定义标签"></a>二十三、JSP 自定义标签</h2><p>自定义标签是用户定义的JSP语言元素。</p>
<ul>
<li><p>当JSP页面包含一个自定义标签时将被转化为servlet，标签转化为对被 称为tag handler的对象的操作，即当servlet执行时Web container调用那些操作。</p>
</li>
<li><p>JSP标签扩展可以让你创建新的标签并且可以直接插入到一个JSP页面。 </p>
</li>
<li><p>JSP 2.0规范中引入Simple Tag Handlers来编写这些自定义标记。</p>
</li>
<li><p>你可以继承SimpleTagSupport类并重写的doTag()方法来开发一个最简单的自定义标签</p>
</li>
</ul>
<h3 id="创建”Hello”标签"><a href="#创建”Hello”标签" class="headerlink" title="创建”Hello”标签"></a>创建”Hello”标签</h3><ul>
<li>创建一个自定义标签叫作<code>&lt;ex:Hello&gt;</code>，<ul>
<li>标签格式为:<code>&lt;ex:Hello /&gt;</code></li>
</ul>
</li>
</ul>
<ol>
<li>创建自定义的JSP标签前，必须创建处理标签的Java类</li>
</ol>
<ul>
<li>比如，创建一个HelloTag类</li>
<li>重写了doTag()方法，方法中使用了getJspContext()方法来获取当前的JspContext对象，并将”Hello Custom Tag!”传递给JspWriter对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException, IOException </span>&#123;</span><br><span class="line">    JspWriter out = getJspContext().getOut();</span><br><span class="line">    out.println(<span class="string">"Hello Custom Tag!"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>编译以上类，并将其复制到环境变量CLASSPATH目录中</p>
</li>
<li><p>最后创建如下标签库：<code>&lt;Tomcat安装目录&gt;webapps\ROOT\WEB-INF\custom.tld</code></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-<span class="class"><span class="keyword">class</span>&gt;<span class="title">com</span>.<span class="title">runoob</span>.<span class="title">HelloTag</span>&lt;/<span class="title">tag</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">body</span>-<span class="title">content</span>&gt;<span class="title">empty</span>&lt;/<span class="title">body</span>-<span class="title">content</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">tag</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="访问标签体"><a href="#访问标签体" class="headerlink" title="访问标签体"></a>访问标签体</h3><p>可以像标准标签库一样在标签中包含消息内容。</p>
<ul>
<li><p>如我们要在我们自定义的Hello中包含内容</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;ex:Hello&gt;</span><br><span class="line">   This is message body</span><br><span class="line">&lt;/ex:Hello&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><p>修改标签处理类文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.runoob;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.jsp.*;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTag</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   StringWriter sw = <span class="keyword">new</span> StringWriter();</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> JspException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">       getJspBody().invoke(sw);</span><br><span class="line">       getJspContext().getOut().println(sw.toString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改TLD文件</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;taglib&gt;</span><br><span class="line">  &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">  &lt;jsp-version&gt;2.0&lt;/jsp-version&gt;</span><br><span class="line">  &lt;short-name&gt;Example TLD with Body&lt;/short-name&gt;</span><br><span class="line">  &lt;tag&gt;</span><br><span class="line">    &lt;name&gt;Hello&lt;/name&gt;</span><br><span class="line">    &lt;tag-<span class="class"><span class="keyword">class</span>&gt;<span class="title">com</span>.<span class="title">runoob</span>.<span class="title">HelloTag</span>&lt;/<span class="title">tag</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">body</span>-<span class="title">content</span>&gt;<span class="title">scriptless</span>&lt;/<span class="title">body</span>-<span class="title">content</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">tag</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">taglib</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在JSP使用修改后的标签</p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib prefix=<span class="string">"ex"</span> uri=<span class="string">"WEB-INF/custom.tld"</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;A sample custom tag&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;ex:Hello&gt;</span><br><span class="line">        This is message body</span><br><span class="line">    &lt;/ex:Hello&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="自定义标签属性"><a href="#自定义标签属性" class="headerlink" title="自定义标签属性"></a>自定义标签属性</h3><p><strong>可以在自定义标准中设置各种属性，要接收属性，值自定义标签类必须实现setter方法</strong></p>
<p>详见：<a href="https://www.runoob.com/jsp/jsp-custom-tags.html" target="_blank" rel="noopener">这里</a></p>
<h2 id="二十四、JSP-表达式语言-expr"><a href="#二十四、JSP-表达式语言-expr" class="headerlink" title="二十四、JSP 表达式语言 ${expr}"></a>二十四、JSP 表达式语言 <code>${expr}</code></h2><p><strong>JSP表达式语言（EL）使得访问存储在JavaBean中的数据变得非常简单</strong></p>
<ul>
<li>JSP EL既可以用来创建算术表达式也可以用来创建逻辑表达式。</li>
<li>在JSP EL表达式内可以使用整型数，浮点数，字符串，常量true、false，还有null。</li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p><code>${expr}</code></p>
<ul>
<li><p>expr指的是表达式。</p>
</li>
<li><p>在JSP EL中通用的操作符是 <strong>.</strong> 和 <strong>{}</strong> 。</p>
<ul>
<li>这两个操作符允许您通过内嵌的JSP对象访问各种各样的JavaBean属性</li>
</ul>
</li>
<li><p>示例</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProperty name=<span class="string">"box"</span> property=<span class="string">"perimeter"</span> </span><br><span class="line">                 value=<span class="string">"$&#123;2*box.width+2*box.height&#125;"</span>/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在EL表达式中可以使用圆括号来组织子表达式。</p>
<ul>
<li>比如<code>${(1 + 2) * 3}等于9，但是${1 + (2 * 3)} 等于7</code>。</li>
</ul>
</li>
<li><p>想要停用对EL表达式的评估的话，需要使用page指令将isELIgnored属性值设为true</p>
<ul>
<li><code>&lt;%@ page isELIgnored =&quot;true|false&quot; %&gt;</code></li>
<li>若设为true，EL表达式就会被忽略</li>
<li>若设为false，则容器将会计算EL表达式</li>
</ul>
</li>
</ul>
<h3 id="EL中的基础操作符"><a href="#EL中的基础操作符" class="headerlink" title="EL中的基础操作符"></a>EL中的基础操作符</h3><p>EL表达式支持大部分Java所提供的算术和逻辑操作符：</p>
<table>
<thead>
<tr>
<th align="left"><strong>操作符</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">.</td>
<td align="left">访问一个Bean属性或者一个映射条目</td>
</tr>
<tr>
<td align="left">[]</td>
<td align="left">访问一个数组或者链表的元素</td>
</tr>
<tr>
<td align="left">( )</td>
<td align="left">组织一个子表达式以改变优先级</td>
</tr>
<tr>
<td align="left">+</td>
<td align="left">加</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">减或负</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">乘</td>
</tr>
<tr>
<td align="left">/ or div</td>
<td align="left">除</td>
</tr>
<tr>
<td align="left">% or mod</td>
<td align="left">取模</td>
</tr>
<tr>
<td align="left">== or eq</td>
<td align="left">测试是否相等</td>
</tr>
<tr>
<td align="left">!= or ne</td>
<td align="left">测试是否不等</td>
</tr>
<tr>
<td align="left">&lt; or lt</td>
<td align="left">测试是否小于</td>
</tr>
<tr>
<td align="left">&gt; or gt</td>
<td align="left">测试是否大于</td>
</tr>
<tr>
<td align="left">&lt;= or le</td>
<td align="left">测试是否小于等于</td>
</tr>
<tr>
<td align="left">&gt;= or ge</td>
<td align="left">测试是否大于等于</td>
</tr>
<tr>
<td align="left">&amp;&amp; or and</td>
<td align="left">测试逻辑与</td>
</tr>
<tr>
<td align="left">|| or or</td>
<td align="left">测试逻辑或</td>
</tr>
<tr>
<td align="left">! or not</td>
<td align="left">测试取反</td>
</tr>
<tr>
<td align="left">empty</td>
<td align="left">测试是否空值</td>
</tr>
</tbody></table>
<h3 id="EL中的函数"><a href="#EL中的函数" class="headerlink" title="EL中的函数"></a>EL中的函数</h3><p><strong>函数必须被定义在自定义标签库中。</strong></p>
<ul>
<li><p>要使用任何标签库中的函数，您需要将这些库安装在服务器中，然后使用<code>&lt;taglib&gt;</code>标签在JSP文件中包含这些库</p>
</li>
<li><p>函数的使用语法：<code>${ns:func(param1, param2, ...)}</code></p>
<ul>
<li>ns指的是命名空间（namespace），</li>
<li>func指的是函数的名称，</li>
<li>param1指的是第一个参数，param2指的是第二个参数，以此类推</li>
</ul>
</li>
<li><p>示例：</p>
<ul>
<li><code>${fn:length(&quot;Get my length&quot;)}</code>   获取一个字符串的长度</li>
</ul>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Gkon</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://gxkon.top/posts/12fc1c4b/">http://gxkon.top/posts/12fc1c4b/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://gxkon.top" target="_blank">Gxkon's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JSP/">JSP</a></div><div class="post_share"><div class="social-share" data-image="/Pic/post.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/posts/8726eb83/"><img class="prev_cover" data-src="https://pic-1256641195.cos.ap-nanjing.myqcloud.com/2020/07/alpaca-5405469_1280.jpg" onerror="onerror=null;src='/Pic/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">ADO 教程</div></div></a></div><div class="next-post pull_right"><a href="/posts/decfd2ee/"><img class="next_cover" data-src="https://pic-1256641195.cos.ap-nanjing.myqcloud.com/2020/07/landscape-5363681_1280.jpg" onerror="onerror=null;src='/Pic/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">REG和BAT文件操作注册表方法</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '1ce3148e3133bf004c96',
  clientSecret: '2a1e5c0f4d38387460b916843bfe5cac67ef2d07',
  repo: 'blankwz.github.io',
  owner: 'blankwz',
  admin: ['blankwz'],
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  perPage: 10,
  distractionFreeMode: false,
  pagerDirection: 'last',
  createIssueManually: false,
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  try {
    document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
  } catch (e) {
    return false
  }
}</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Gkon</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">簡</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/third-party/ClickShowText.js"></script></body></html>